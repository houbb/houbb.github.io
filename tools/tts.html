<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->

    <title>TTS 测试实例</title>

    <link rel="stylesheet" href="base.css">

    <style>

        .textarea {
            height: 400px;
            width: 100%;
        }

        #tts_btn {
            margin-top: 20px;
        }

    </style>

</head>
<body class="container">

<textarea class="textarea" id="ttsText" placeholder="请输入需要转换的文本..." type="text"></textarea>

<button class="btn" id="tts_btn" onclick="doTTS()">播放</button>

<div id="bdtts_div_id">
    <audio id="tts_autio_id" autoplay="autoplay">
        <source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=9&text=播报内容"
                type="audio/mpeg">
        <embed id="tts_embed_id" height="0" width="0" src="">
    </audio>
</div>


<script>

    function doTTS() {
        var ttsDiv = document.getElementById('bdtts_div_id');
        var ttsAudio = document.getElementById('tts_autio_id');
        var ttsText = document.getElementById('ttsText').value;

        // 这样为什么替换不了播放内容
        /*var ssrcc = 'http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=10&text='+ttsText;
         document.getElementById('tts_source_id').src=ssrcc;*/

        // 这样就可实现播放内容的替换了
        ttsDiv.removeChild(ttsAudio);
        var au1 = '<audio id="tts_autio_id" autoplay="autoplay">';
        var sss = '<source id="tts_source_id" src="http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=2&text=' + ttsText + '" type="audio/mpeg">';
        var eee = '<embed id="tts_embed_id" height="0" width="0" src="">';
        var au2 = '</audio>';
        ttsDiv.innerHTML = au1 + sss + eee + au2;

        ttsAudio = document.getElementById('tts_autio_id');

        ttsAudio.play();
    }

</script>

</body>
</html>