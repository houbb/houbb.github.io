<style>
    pre {
        height: 200px;
        width: 200px;
        display: block;
        font: bold 5px/5px monospace;
    }
</style>
<canvas id="canvas"></canvas>
<script>
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    canvas.width = 100;
    canvas.height = 100;
    var img = new Image();
    img.src = "love.png";


    context.drawImage(img,0,0, canvas.width, canvas.height);     //限制图片大小
    //获取图片对象以及元素点的数组
    var readWidth = canvas.width;
    var readHeight = canvas.height;
    var img1 = context.getImageData(0, 0, readWidth, readHeight);
    var data = img1.data;


    img.onload =function(){
        invert2(this);
    };


    //    像素点的rgba数组
    function invert2(img) {
        var result = "";

        //每个有4个值 RGBA
        //data 的长度为 width*height*4 = 800*800*4 = 256W;
        for (var i = 0, len = data.length; i < len; i += 4) {
            var r = data[i];
            var g = data[i + 1];
            var b = data[i + 2];
            result += gray2asc(rgb2gray(r, g, b));
            if(i%(readWidth*4)==0&&i!=0){
                result += '\n';
            }
        }

        const dom = document.createElement('pre');
        dom.innerHTML = result;
        document.body.appendChild(dom);
    }

    //rgb 转为灰度
    function rgb2gray(r, g, b) {
        return 0.299 * r + 0.578 * g + 0.114 * b;
    }

    //粒度控制的越精细越好
    //gray => ascii
    function gray2asc(gray) {
        var arr=["@","#","&","$","%","*","o", "c", "!",";",":","-","."," "," "];
        var num=Math.floor(gray/18);
        return arr[num];
    }


</script>