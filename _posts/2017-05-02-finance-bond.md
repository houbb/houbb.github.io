---
layout: post
title:  Bond
date:  2017-05-07 11:50:13 +0800
categories: [Finance]
tags: [finance, bond]
published: true
---



# 债券

[债券(Notes)](http://wiki.mbalib.com/wiki/Bond)是政府、金融机构、工商企业等机构直接向社会借债筹措资金时，向投资者发行，承诺按一定利率支付利息并按约定条件偿还本金的债权债务凭证。


# 基础积累

- 精确度问题

一般数值精确度4位，利率为6位。

- 利率基准

Type 为0， DBD（day by day）；Type 为1，PDP（period by period）。

- 日初日终问题

一般银行间为日初，交易所为日终。

- 修正天数(fixing day)

除了ON(one day),及比这个更短的，对应的修正天数为0。其他的都为1。即往前推一天的工作日。

# 浮动浮动利率

根据债券利率在偿还期内是否变化，可将债券区分为固定利率债券和[浮动利率债券](http://wiki.mbalib.com/wiki/%E6%B5%AE%E5%8A%A8%E5%88%A9%E7%8E%87%E5%80%BA%E5%88%B8)。

浮动利率是指发行时规定债券利率随市场利率定期浮动的债券，也就是说，债券利率在偿还期内可以进行变动和调整。


利率一般以 IBOR 为准，然后加以 Spread(利差) 进行调整。对于远期的利率估计，一般使用 **FloatForward** 算法。



# 现金流 

[现金流量](http://wiki.mbalib.com/wiki/%E7%8E%B0%E9%87%91%E6%B5%81)是现代理财学中的一个重要概念，是指企业在一定会计期间按照现金收付实现制，
通过一定经济活动(包括经营活动、投资活动、筹资活动和非经常性项目)而产生的现金流入、现金流出及其总量情况的总称。
即：企业一定时期的现金和现金等价物的流入和流出的数量。

所有的资产都可以理解为是现金流，对传统的理解应该被革新。资产可以理解为从现在开始往后的所有时间段的资产之和。

```
M = M_0 + M_1 + ... + M_t
```


# 应计利息

[应计利息](http://wiki.mbalib.com/wiki/%E5%BA%94%E8%AE%A1%E5%88%A9%E6%81%AF)是指自上一利息支付日至买卖结算日产生的利息收入，具体而言，零息债券是指发行起息日至交割日所含利息金额；
附息债券是指本付息期起息日至交割日所含利息金额；贴现债券没有票面利率，其应计利息额设为零。


附息债券应计利息的计算公式如下（以每百元债券所含利息额列示）：

```
应计利息额=票面利率÷365×（买卖结算日－上一利息支付日）×100
```

[应计利息和到期收益率的计算方法.doc]({{ site.url }}/static/app/res/doc/finance/应计利息和到期收益率的计算方法.doc)


- 简单图解

假设现有一支债券。一年内付息频率为4（3M 一次）。对应下图 A、B、C、D、E 四个区间。

我们在 F 点买进。那么应计利息应该是多少呢？根据上面的公式

```
应计利息额=票面利率÷365 × DayDiff(B, F) × 100
```

备注：DayDiff(x, y) 为 y-x 实际相差的天数。

上面的计算方式是看占一年365天的多少。也可以用占用月份的多少来计算(仍然假设一年为整体1，一共4个区间，每个区间3个月)。

```
应计利息额=票面利率 × 100 ÷ 4 × DayDiff(B, F)/DayDiff(B, C)  
```

![ai](https://raw.githubusercontent.com/houbb/resource/master/img/finance/bond/2017-05-07-finance-bond-ai.png)


# 到期收益率

[到期收益(Yield To Maturity)](http://wiki.mbalib.com/wiki/%E5%88%B0%E6%9C%9F%E6%94%B6%E7%9B%8A%E7%8E%87)，是指将债券持有到偿还期所获得的收益，包括到期的全部利息。
到期收益率又称最终收益率，是投资购买国债的内部收益率，即可以使投资购买国债获得的未来现金流量的现值等于债券当前市价的贴现率。


```
全价(DP) = 净价(CP) + 应计利息(AI)
```

到期收益率(YTM)和全价是息息相关的。

设F为债券的面值，C为按票面利率每年支付的利息，Pv为债券当前市场价格，r为到期收益率，则：


![ai](https://raw.githubusercontent.com/houbb/resource/master/img/finance/bond/2017-05-07-finance-bond-rate.png)


上述等式的分母(此处不够确切，后续修改)有三种情况：

单利：(1+RT) 最后购买(simple)

复利: (1+R)^t 不在最后买(couple)。

利滚利: (e)^{rt}


上面的 `t` 可能是日、月、年。为了统一，统一使用年华时间。
 
```
Rt = (R/Freq) * (t*Freq)
```

永远记住：

应计算的是**过去**，贴现算的是**未来**。


















