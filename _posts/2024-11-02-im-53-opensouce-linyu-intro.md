---
layout: post
title: IM å³æ—¶é€šè®¯ç³»ç»Ÿ-53-im system server
date: 2024-11-02 21:01:55 +0800
categories: [IM]
tags: [im, opensource, sh]
published: true
---

# IM å¼€æºç³»åˆ—

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-41-å¼€æº é‡ç«IM ä¸“æ³¨äºå³æ—¶é€šè®¯å®æ—¶éŸ³è§†é¢‘æŠ€æœ¯ï¼Œæä¾›ä¼˜è´¨å¯æ§çš„IM+RTCèƒ½åŠ›](https://houbb.github.io/2024/11/02/im-41-opensouce-yehuo-overview)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-42-åŸºäºnettyå®ç°çš„IMæœåŠ¡ç«¯,æä¾›å®¢æˆ·ç«¯jaråŒ…,å¯é›†æˆè‡ªå·±çš„ç™»å½•ç³»ç»Ÿ](https://houbb.github.io/2024/11/02/im-42-opensouce-yuanrw-im-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-43-ç®€å•çš„ä»¿QQèŠå¤©å®‰å“APP](https://houbb.github.io/2024/11/02/im-43-opensouce-xiuweikang-im)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-44-ä»¿QQå³æ—¶é€šè®¯ç³»ç»ŸæœåŠ¡ç«¯](https://houbb.github.io/2024/11/02/im-44-opensouce-kingston-csj-im)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-45-merua0oo0 IM åˆ†å¸ƒå¼èŠå¤©ç³»ç»Ÿ](https://houbb.github.io/2024/11/02/im-45-opensouce-merua0oo0-im)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-46-OpenIM æä¾›äº†ä¸“ä¸ºå¼€å‘è€…è®¾è®¡çš„å¼€æºå³æ—¶é€šè®¯è§£å†³æ–¹æ¡ˆ](https://houbb.github.io/2024/11/02/im-46-opensouce-open-im-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-47-beardlessCat IM ä½¿ç”¨nettyå¼€å‘åˆ†å¸ƒå¼Imï¼Œæä¾›åˆ†å¸ƒnettyé›†ç¾¤è§£å†³æ–¹æ¡ˆ](https://houbb.github.io/2024/11/02/im-47-opensouce-beardlessCat-im-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-48-aurora-imui æ˜¯ä¸ªé€šç”¨çš„å³æ—¶é€šè®¯ï¼ˆIMï¼‰UI åº“ï¼Œä¸ç‰¹å®šäºä»»ä½• IM SDK](https://houbb.github.io/2024/11/02/im-48-opensouce-aurora-imui-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-49-äº‘ä¿¡ IM UIKit æ˜¯åŸºäº NIM SDKï¼ˆç½‘æ˜“äº‘ä¿¡ IM SDKï¼‰å¼€å‘çš„ä¸€æ¬¾å³æ—¶é€šè®¯ UI ç»„ä»¶åº“ï¼ŒåŒ…æ‹¬èŠå¤©ã€ä¼šè¯ã€åœˆç»„ã€æœç´¢ã€ç¾¤ç®¡ç†ç­‰ç»„ä»¶](https://houbb.github.io/2024/11/02/im-49-opensouce-nim-uikit-android-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-50-ğŸ“²cim(cross IM) é€‚ç”¨äºå¼€å‘è€…çš„åˆ†å¸ƒå¼å³æ—¶é€šè®¯ç³»ç»Ÿ](https://houbb.github.io/2024/11/02/im-50-opensouce-cim-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-51-MPushå¼€æºå®æ—¶æ¶ˆæ¯æ¨é€ç³»ç»Ÿ](https://houbb.github.io/2024/11/02/im-51-opensouce-mpush-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-52-leo-im æœåŠ¡ç«¯](https://houbb.github.io/2024/11/02/im-52-opensouce-leo-im-intro)

[IM å³æ—¶é€šè®¯ç³»ç»Ÿ-53-im system server](https://houbb.github.io/2024/11/02/im-53-opensouce-linyu-intro)

# IM

https://github.com/lining90567/leo-im-server

# æ—è¯­

å®¢æˆ·ç«¯åœ°å€ï¼šhttps://github.com/DWHengr/linyu-client

ç®¡ç†ç«¯åœ°å€ï¼šhttps://github.com/DWHengr/linyu-admin-web

# ç®€ç»

`æ—è¯­`æ˜¯åŸºäº`tauri`å¼€å‘çš„æ¡Œé¢èŠå¤©è½¯ä»¶ï¼Œå‰ç«¯æ¡†æ¶ä½¿ç”¨`react`ï¼Œåç«¯æ¡†æ¶ä½¿ç”¨`springboot`è¿›è¡Œå¼€å‘ï¼Œç®¡ç†ç«¯ä½¿ç”¨`vue3`è¿›è¡Œå¼€å‘ã€‚

å…¶ä¸­ä½¿ç”¨httpå’Œwebsocketå®ç°æ¶ˆæ¯å‘é€å’Œæ¨é€ï¼Œä½¿ç”¨webrtcå®ç°éŸ³è§†é¢‘èŠå¤©ã€‚

# ç›®å‰åŠŸèƒ½

## å®¢æˆ·ç«¯åŠŸèƒ½

å¥½å‹ç›¸å…³ã€æœ‹å‹åœˆã€éŸ³è§†é¢‘èŠå¤©ã€è¯­éŸ³æ¶ˆæ¯ã€æ–‡æœ¬æ¶ˆæ¯ã€æ–‡ä»¶æ¶ˆæ¯ã€å›¾ç‰‡æ¶ˆæ¯ã€æˆªå›¾ã€ç¾¤èŠç­‰ã€‚

## ç®¡ç†ç«¯åŠŸèƒ½

ä¿¡æ¯ç»Ÿè®¡ã€ç”¨æˆ·ç®¡ç†ã€åœ¨çº¿èŠå¤©ã€ç³»ç»Ÿé€šçŸ¥ç®¡ç†ã€ç¬¬ä¸‰æ–¹ä¼šè¯ç®¡ç†ç­‰ã€‚

# é¡¹ç›®ç›¸å…³

## javaç¯å¢ƒ

å¼€å‘ä½¿ç”¨çš„javaç‰ˆæœ¬ä¸º`1.8`ï¼Œspringbootç‰ˆæœ¬ä¸º`2.6.7`ã€‚

## mysqlå®‰è£…

mysqlä½¿ç”¨çš„ç‰ˆæœ¬ä¸º`8.0.37`ï¼Œæ‰§è¡Œé¡¹ç›®ä¸‹`linyu.sql`å†…å®¹æ¥åˆå§‹åŒ–æ•°æ®åº“ã€‚

## minioå®‰è£…

minioä½¿ç”¨çš„ç‰ˆæœ¬ä¸º`RELEASE.2024-05-10T01-41-38Z`ã€‚

## rediså®‰è£…

Redisä½¿ç”¨çš„ç‰ˆæœ¬ä¸º`5.0.14.1`

## RocketMQå®‰è£…

RocketMQä½¿ç”¨çš„ç‰ˆæœ¬ä¸º`5.3.0`

## faster-whisper-serverå®‰è£…

#### 1.ä¸‹è½½æ¨¡å‹ï¼ˆwhisperå›½å†…æ¨¡å‹æ— æ³•è‡ªåŠ¨ä¸‹è½½ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½ï¼‰

https://huggingface.co/Systran/faster-whisper-small

#### 2.ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ˆå°†æ¨¡å‹ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç›®å½•å¯ä»¥ä»»æ„ï¼‰

#### 3.ä½¿ç”¨dockeréƒ¨ç½²ï¼ˆæŒ‚è½½åˆšæ‰ä¸Šä¼ çš„æ¨¡å‹ç›®å½•ï¼‰

docker run -d --publish 8000:8000 --volume /model:/model fedirz/faster-whisper-server:latest-cpu

#### 4.apiè°ƒç”¨ç¤ºä¾‹

curl http://127.0.0.1:8000/v1/audio/transcriptions -F "file=@1.wav" -F"model=/model/faster-whisper-small/"

## é…ç½®ä¿®æ”¹

ä¿®æ”¹`application.yml`å†…ï¼Œmysqlã€minioã€redisã€faster-whisper-serverç›¸å…³åœ°å€ã€‚

# å®¢æˆ·ç«¯æˆªå›¾

## ç™»å½•

![1](https://github.com/user-attachments/assets/0cccc2d1-79c8-43fd-844f-9254edbe6e7e)

## èŠå¤©

![2](https://github.com/user-attachments/assets/0d3d85be-1342-4bd2-b4f1-614c93a8a0a5)

## ç¾¤èŠ

![3](https://github.com/user-attachments/assets/6aa0a021-92b7-46fe-8aea-5487d97362a7)

## é€šè®¯åˆ—è¡¨

![4](https://github.com/user-attachments/assets/b1f4ff7b-8ecc-4baa-b38d-bbf7099dec19)

## æœ‹å‹åœˆ

![5](https://github.com/user-attachments/assets/b30432b9-904a-432c-bb85-03f8560ddc3b)

## é€šçŸ¥

![6](https://github.com/user-attachments/assets/b7eb922d-9aec-4607-b004-6921e178facb)

## ç³»ç»Ÿè®¾ç½®

![7](https://github.com/user-attachments/assets/714144de-92bc-42f4-89bb-2a2696884693)

## å…¶ä»–

![8](https://github.com/user-attachments/assets/43555b11-0a8b-4850-b6fa-0d4d099bc34a)

# ç®¡ç†ç«¯æˆªå›¾

## ç™»å½•

![9](https://github.com/user-attachments/assets/2fead35c-1176-4031-8c5d-d94d42af7bdb)

## é¦–é¡µ

![10](https://github.com/user-attachments/assets/cbca1555-53a0-4107-90ea-25e7f9f441e4)

## åœ¨çº¿èŠå¤©

![11](https://github.com/user-attachments/assets/acb99729-48d4-47cf-b837-9fcac7221c5d)

## ç”¨æˆ·ç®¡ç†

![12](https://github.com/user-attachments/assets/afa3b6de-54f9-4927-9fd5-f5e97dcb8884)

## ç³»ç»Ÿé€šçŸ¥ç®¡ç†

![13](https://github.com/user-attachments/assets/fff0cb8e-0339-4df7-9935-bc552b788e9e)

## ç¬¬ä¸‰æ–¹ä¼šè¯ç®¡ç†

![14](https://github.com/user-attachments/assets/38de0173-b2d0-4afb-bba0-dab06aaad920)

# Dockeréƒ¨ç½²

## æœåŠ¡éƒ¨ç½²

åŸºäº`docker-compose`è¿›è¡Œéƒ¨ç½²ã€‚å°†é¡¹ç›®ä¸‹çš„`/deploy/compose`ç›®å½•ï¼Œæ‹·è´åˆ°ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼Œæ³¨æ„ä¿®æ”¹ç›®å½•ä¸‹`.env`
å’Œ`broker.conf`å†…çš„é…ç½®ã€‚ä¿®æ”¹å®Œæˆåè¿è¡Œ`docker-compose up -d`å‘½ä»¤ã€‚

## æ•°æ®åº“åˆå§‹åŒ–

è¿æ¥æ•°æ®åº“ä¸Šé¢éƒ¨ç½²çš„æ•°æ®åº“ï¼Œæ‰§è¡Œåˆå§‹åŒ–sqlè¯­å¥`linyu.sql`ï¼ˆä½äºé¡¹ç›®ç›®å½•ä¸‹ï¼‰ã€‚

## whisperæ¨¡å‹ä¸Šä¼ 

è¯­éŸ³è½¬æ–‡å­—åŸºäº`faster-whisper`
å®ç°ï¼Œéœ€è¦ä¸Šä¼ whisperæ¨¡å‹ï¼Œå°†faster-whisper-smallï¼ˆä¸‹è½½åœ°å€ `https://huggingface.co/Systran/faster-whisper-small`
ï¼‰æ¨¡å‹ä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨`/linyu/whisper/model/`ç›®å½•ä¸‹ã€‚

# ç»“è¯­

![admire](https://github.com/user-attachments/assets/7e77ac87-a913-4f87-8783-a1d313297a05)


# å‚è€ƒèµ„æ–™

* any list
{:toc}