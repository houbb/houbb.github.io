---
layout: post
title: leetcode æ•°ç»„ä¸“é¢˜ä¹‹æ•°ç»„éå†-01-éå† T31 ä¸‹ä¸€ä¸ªæ’åˆ— next-permutation
date:  2020-6-8 15:13:08 +0800
categories: [Algorithm]
tags: [algorithm, data-struct, topics, leetcode, array, traverse, two-pointer, sf]
published: true
---


# æ•°ç»„

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€é©¬ã€‚

ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹æ•°ç»„è¿™ç§æ•°æ®ç»“æ„ã€‚

## ä¸»è¦çŸ¥è¯†

æ•°ç»„éœ€è¦æ‹†åˆ†ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š

1. ç†è®ºä»‹ç»

2. æºç åˆ†æ

3. æ•°æ®ç»“æ„å®ç°ï¼Ÿ

4. é¢˜ç›®ç»ƒä¹ ï¼ˆæŒ‰ç…§ç®—æ³•æ€æƒ³åˆ†ç±»ï¼‰

5. æ¢³ç†å¯¹åº”çš„ sdk åŒ…

6. åº”ç”¨å®æˆ˜

å› ä¸ºè¿™ä¸ªæ˜¯ leetcode ç³»åˆ—ï¼Œæ‰€ä»¥é‡ç‚¹æ˜¯ 4ã€5(å¯¹4å†ä¸€æ¬¡æ€»ç»“)ã€‚

ä¸ºäº†ç…§é¡¾æ²¡æœ‰åŸºç¡€çš„å°ä¼™ä¼´ï¼Œä¼šç®€å•ä»‹ç»ä¸€ä¸‹1çš„åŸºç¡€ç†è®ºã€‚

ç®€å•ä»‹ç»1ï¼Œé‡ç‚¹ä¸º4ã€‚å…¶ä»–ä¸æ˜¯æœ¬ç³»åˆ—çš„é‡ç‚¹ã€‚

# T31 ä¸‹ä¸€ä¸ªæ’åˆ— next-permutation

æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª æ’åˆ—  å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚

ä¾‹å¦‚ï¼Œarr = [1,2,3] ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ arr çš„æ’åˆ—ï¼š[1,2,3]ã€[1,3,2]ã€[3,1,2]ã€[2,3,1] ã€‚

æ•´æ•°æ•°ç»„çš„ ä¸‹ä¸€ä¸ªæ’åˆ— æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚

æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ ä¸‹ä¸€ä¸ªæ’åˆ— å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚

å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚

ä¾‹å¦‚ï¼Œarr = [1,2,3] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,3,2] ã€‚

ç±»ä¼¼åœ°ï¼Œarr = [2,3,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [3,1,2] ã€‚

è€Œ arr = [3,2,1] çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [1,2,3] ï¼Œå› ä¸º [3,2,1] ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡º nums çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚

å¿…é¡» åŸåœ° ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[1,3,2]

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [3,2,1]
è¾“å‡ºï¼š[1,2,3]

ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼šnums = [1,1,5]
è¾“å‡ºï¼š[1,5,1]
 
æç¤ºï¼š

1 <= nums.length <= 100
0 <= nums[i] <= 100

----------------------------------------------------------------

# å†å²å›é¡¾

[ã€leetcodeã€‘016-31.ä¸‹ä¸€ä¸ªæ’åˆ— next permutation + 46. å…¨æ’åˆ— permutations + 47. å…¨æ’åˆ— II permutations-ii + 60. æ’åˆ—åºåˆ— permutation sequence](https://houbb.github.io/2020/06/08/algorithm-016-leetcode-31-next-permutation)

[leetcode 31+46+60 Next Permutation/Permutations/Permutation Sequence backtrack](https://houbb.github.io/2020/01/23/algorithm-34-leetcode-permutation)


# å‰è¨€

è¿™ä¸€é¢˜ï¼Œå±äºå¾ˆå¼ºçš„æŠ€å·§é¢˜ã€‚

å¯¹äº java è€Œè¨€ï¼Œæ˜¯æ²¡æœ‰è¿™ä¸ªå†…ç½®å‡½æ•°çš„ã€‚

é‚£ä¹ˆè§£æ³•å°±å‰©ä¸‹ 3 ç§å¯èƒ½ï¼š

1ï¼‰ç”Ÿæˆå…¨æ’åˆ—+æ’åº+æ‰¾åˆ°ç»“æœ

ç”Ÿæˆå…¨æ’åˆ—å¦‚æœä¸ä¼šå›æº¯ï¼Œå¯èƒ½æ›´éš¾

2ï¼‰å®ç°æŠ€å·§è§£æ³• nextPermutation

# v1-æŠ€å·§æ€§è§£æ³•

## æ€è·¯

è¿™ä¸€é¢˜å¯ä»¥è¯´æ˜¯çº¯æŠ€å·§é¢˜ï¼Œä¸ä¼šå°±æ˜¯ä¸ä¼šã€‚

å¯¹ä»»æ„ `nums`ï¼Œæˆ‘ä»¬æŒ‰å¦‚ä¸‹æ­¥éª¤å®ç° nextPermutationï¼š

1. **ä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª `i`ï¼Œä½¿å¾— `nums[i] < nums[i + 1]`**ï¼›
2. å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¯´æ˜æ•´ä¸ªæ•°ç»„æ˜¯é™åºçš„ï¼Œç›´æ¥åè½¬å³å¯ï¼›
3. å¦åˆ™ï¼Œä»å³å‘å·¦æ‰¾ç¬¬ä¸€ä¸ª `j`ï¼Œä½¿å¾— `nums[j] > nums[i]`ï¼›
4. äº¤æ¢ `nums[i]` å’Œ `nums[j]`ï¼›
5. åè½¬ `nums[i + 1:]` è¿™æ®µï¼ˆåç¼€å‡åºåŒ–ï¼‰ï¼›

## ä¾‹å­

### Step 1ï¼šä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªâ€œä¸‹é™ç‚¹â€

> åœ¨æ•°ç»„ä¸­ï¼Œä»å³å¾€å·¦ï¼Œå“ªä¸€ä½æ˜¯ç¬¬ä¸€ä¸ª `nums[i] < nums[i+1]` çš„ï¼Ÿ

è¿™è¯´æ˜ï¼š

* åœ¨ `i` ä¹‹åçš„éƒ¨åˆ†æ˜¯**é€’å‡åºåˆ—**ï¼ˆè¯´æ˜å·²ç»æœ€å¤§äº†ï¼‰ï¼›
* `i` æ˜¯æˆ‘ä»¬å¯ä»¥â€œåšå˜åŠ¨â€çš„åœ°æ–¹ã€‚

å‡è®¾è¾“å…¥ä¸ºï¼š`[1, 2, 3, 6, 5, 4]`

è¯·ä½ è¯•ç€ä»å³å¾€å·¦æ‰¾ç¬¬ä¸€ä¸ª `nums[i] < nums[i + 1]`ï¼Œä½ è®¤ä¸º `i` åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ

* ä»å³å¾€å·¦æ‰«æï¼š

  * `5 > 4` âŒ
  * `6 > 5` âŒ
  * `3 < 6` â†’ æ‰¾åˆ° `i = 2`

è¯´æ˜ï¼š

* ä¸‹æ ‡ 2ï¼ˆå…ƒç´  `3`ï¼‰æ˜¯æˆ‘ä»¬è¦â€œåŠ¨â€çš„èµ·ç‚¹ï¼›
* å®ƒåé¢çš„ `[6, 5, 4]` å·²ç»æ˜¯**å­—å…¸åºæœ€å¤§æ’åˆ—**äº†ã€‚

### Step 2ï¼šåœ¨å³è¾¹æ‰¾**æ¯” `nums[i]` å¤§çš„æœ€å°çš„æ•°**

æˆ‘ä»¬ç°åœ¨æƒ³ä» `nums[i+1:]` è¿™æ®µä¸­ï¼Œ**æ‰¾ä¸€ä¸ªæ¯” `nums[i]` å¤§çš„æ•°ï¼Œå¹¶ä¸”å°½å¯èƒ½å°**ï¼Œæ¢è¿‡å»è®©æ•´ä½“å˜å¤§ï¼Œä½†åˆæ˜¯â€œä¸‹ä¸€ä¸ªâ€ã€‚

æ€è€ƒé—®é¢˜ï¼š

> ä» `nums[3] = 6`, `nums[4] = 5`, `nums[5] = 4` ä¸­ï¼Œå“ªä¸ªæ˜¯ç¬¬ä¸€ä¸ªå¤§äº `3` çš„æ•°ï¼ˆä»å³å¾€å·¦æ‰¾ï¼‰ï¼Ÿ

æˆ‘ä»¬ä»å³å¾€å·¦æ‰«æï¼Œå‘ç°ï¼š

* `nums[5] = 4 > 3` 
* è¿™æ˜¯ç¬¬ä¸€ä¸ªæ¯” `nums[2] = 3` å¤§çš„æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰¾åˆ° `j = 5`

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸¤ä¸ªå…³é”®ç‚¹ï¼š

* `i = 2`ï¼ˆå€¼ä¸º 3ï¼‰
* `j = 5`ï¼ˆå€¼ä¸º 4ï¼‰

### Step 3ï¼šäº¤æ¢ `nums[i]` å’Œ `nums[j]`

ç°åœ¨æˆ‘ä»¬è¦åšä»€ä¹ˆï¼Ÿ

> **äº¤æ¢å®ƒä»¬ï¼Œè®©æ•´ä½“å˜å¾—æ›´å¤§ä¸€ç‚¹ï¼Œä½†å°½å¯èƒ½å°**ï¼ˆå­—å…¸åºç´§æ¥ç€ï¼‰

åŸæ•°ç»„ï¼š

```
[1, 2, 3, 6, 5, 4]
       â†‘     â†‘
       i     j
```

äº¤æ¢ä¹‹åå˜æˆï¼š

```
[1, 2, 4, 6, 5, 3]
```

### Step 4ï¼šåè½¬ `i+1` åˆ°æœ«å°¾çš„é‚£ä¸€æ®µ

ç›®å‰ `nums` æ˜¯ï¼š

```
[1, 2, 4, 6, 5, 3]
             â†‘
           è¿™ä¸€æ®µæ˜¯é€’å‡åº
```

ä¸ºäº†å˜æˆ**æœ€å°çš„åç¼€ï¼ˆå‡åºï¼‰**ï¼Œæˆ‘ä»¬è¦ **æŠŠ `i+1` åˆ°æœ«å°¾é‚£æ®µåè½¬**ã€‚

æ²¡é”™ï¼ğŸ‘

ä½ æŠŠ `[6, 5, 3]` åè½¬ä¹‹åå˜æˆäº† `[3, 5, 6]`ã€‚

æ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆçš„æ•°ç»„å°±æ˜¯ï¼š

```
[1, 2, 4, 3, 5, 6]
```

è¿™å°±æ˜¯ `[1, 2, 3, 6, 5, 4]` çš„ **å­—å…¸åºä¸‹ä¸€ä¸ªæ’åˆ—**

## å®ç°

```java
    public void nextPermutation(int[] nums) {
        int n = nums.length;
        int i = -1;

        //1. ä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª `i`ï¼Œä½¿å¾— `nums[i] < nums[i + 1]`ï¼›
        for(i = n-2; i >=0; i--) {
            if(nums[i] < nums[i + 1]){
                break;
            }
        }
        // æœªæ‰¾åˆ°ï¼Œè¯´æ˜æ˜¯æœ€å¤§é¡ºåº reverse
        if(i == -1) {
            reverse(nums, 0, n-1);
            return;
        }

        // 3.å¦åˆ™ï¼Œä»å³å‘å·¦æ‰¾ç¬¬ä¸€ä¸ª `j`ï¼Œä½¿å¾— `nums[j] > nums[i]`ï¼›
        // å› ä¸º i æ‰¾åˆ°çš„æ¡ä»¶ï¼Œå¿…ç„¶å­˜åœ¨ j
        int j = n-1;
        for(j = n-1; j > i; j--) {
            if(nums[j] > nums[i]) {
                break;
            }
        }

        //4. swap
        swap(nums, i, j);

        //5. reverse
        reverse(nums, i+1, n-1);
    }

    /**
     * é€†åº
     * @param nums æ•°ç»„
     * @param startIndex å¼€å§‹
     * @param endIndex ç»“æŸ
     */
    private void reverse(int[] nums, int startIndex, int endIndex) {
        while (startIndex < endIndex) {
            swap(nums, startIndex++, endIndex--);
        }
    }

    private void swap(int[] nums, int startIndex, int endIndex) {
        int temp = nums[startIndex];
        nums[startIndex] = nums[endIndex];
        nums[endIndex] = temp;
    }
```

## è§£æ³•

0ms å‡»è´¥ 100.00%

## å¤æ‚åº¦

TCï¼š O(n)
SC:  O(1)

## åæ€

è¿™ç§é¢˜ç›®ï¼Œä¸€ä¸ªæœˆä¼°è®¡åˆå¿˜è®°äº†ã€‚

# v2-å¨±ä¹å…¨æ’åˆ—

## æ€è·¯

æˆ‘ä»¬æ¥ä¸€ä¸ªå¨±ä¹è§£æ³•ã€‚

1ï¼‰æ„å»ºå…¨æ’åº

2ï¼‰æ’åº

3ï¼‰æŒ‰ç…§é¡ºåºæ‰¾ï¼Œç„¶åæ‰¾ä¸€ä¸‹ã€‚è¿”å›ç»“æœ


ä¸‹é¢çš„è§£æ³•ï¼Œå¦‚æœæˆ‘ä»¬ç†Ÿç»ƒå­¦ä¼šå›æº¯ï¼Œè¿˜æ˜¯å®¹æ˜“è®°å¿†çš„ã€‚

## å®ç°

```java
public void nextPermutation(int[] nums) {
        // ä¿å­˜åŸå§‹æ•°ç»„
        int[] original = Arrays.copyOf(nums, nums.length);

        // Step 1: æ’åºï¼Œå‡†å¤‡ç”Ÿæˆæ‰€æœ‰æ’åˆ—
        Arrays.sort(nums);

        // Step 2: ç”Ÿæˆæ‰€æœ‰ä¸é‡å¤æ’åˆ—
        List<List<Integer>> allPermutations = new ArrayList<>();
        boolean[] used = new boolean[nums.length];
        backtrack(nums, new ArrayList<>(), used, allPermutations);

        // Step 3: æ‰¾åŸå§‹æ’åˆ—çš„ä½ç½®
        int index = -1;
        for (int i = 0; i < allPermutations.size(); i++) {
            if (equalList(allPermutations.get(i), original)) {
                index = i;
                break;
            }
        }

        // Step 4: å¦‚æœæ‰¾åˆ°ï¼Œåˆ™å–ä¸‹ä¸€ä¸ªæ’åˆ—ï¼ˆè‹¥æ²¡æœ‰ä¸‹ä¸€ä¸ªï¼Œåˆ™å›åˆ°ç¬¬ä¸€ä¸ªï¼‰
        List<Integer> next;
        if (index == -1 || index == allPermutations.size() - 1) {
            next = allPermutations.get(0);
        } else {
            next = allPermutations.get(index + 1);
        }

        // Step 5: æŠŠç»“æœå†™å›åŸæ•°ç»„
        for (int i = 0; i < nums.length; i++) {
            nums[i] = next.get(i);
        }
    }

    // å›æº¯ç”Ÿæˆæ‰€æœ‰ä¸é‡å¤æ’åˆ—
    private void backtrack(int[] nums, List<Integer> path, boolean[] used, List<List<Integer>> res) {
        if (path.size() == nums.length) {
            res.add(new ArrayList<>(path));
            return;
        }

        for (int i = 0; i < nums.length; i++) {
            // è·³è¿‡é‡å¤å…ƒç´ 
            if (used[i]) continue;
            if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) continue;

            used[i] = true;
            path.add(nums[i]);
            backtrack(nums, path, used, res);
            path.remove(path.size() - 1);
            used[i] = false;
        }
    }

    // åˆ¤æ–­ä¸¤ä¸ª List æ˜¯å¦å†…å®¹ç›¸åŒ
    private boolean equalList(List<Integer> list, int[] nums) {
        if (list.size() != nums.length) return false;
        for (int i = 0; i < nums.length; i++) {
            if (list.get(i) != nums[i]) return false;
        }
        return true;
    }
```

## æ•ˆæœ

è¶…å‡ºå†…å­˜é™åˆ¶
64 / 266 ä¸ªé€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹


# å°ç»“

å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¦‚æœæœ‰å…¶ä»–æƒ³æ³•çš„è¯ï¼Œä¹Ÿå¯ä»¥è¯„è®ºåŒºå’Œå¤§å®¶åˆ†äº«å“¦ã€‚

å„ä½æå®¢çš„ç‚¹èµæ”¶è—è½¬å‘ï¼Œæ˜¯è€é©¬æŒç»­å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼

ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†è®²è§£ Top100 ç»å…¸é¢˜ç›®ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€æ³¢ï¼Œç²¾å½©å†…å®¹ï¼Œä¸å®¹é”™è¿‡ã€‚

* any list
{:toc}