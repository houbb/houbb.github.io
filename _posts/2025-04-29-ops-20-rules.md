---
layout: post
title: 运维必须刻进 DNA 里的 20 条故障保命法则
date: 2025-4-29 09:06:44 +0800
categories: [Ops]
tags: [ops, rule, sh]
published: true
---


# 前言

在企业的日常运维工作中，经常会遇到各种各样的故障。

这些故障如果不及时排查和修复，可能会影响业务的正常运行，甚至导致数据丢失或系统崩溃。

因此，掌握常见故障的排查和修复方法，对于运维人员来说至关重要。

本文将介绍20个日常运维工作中常见的高频故障及其排查和修复方法，希望能为运维人员提供一些实用的参考。

# 1、服务器无法访问

故障现象：服务器无法通过网络访问。

## 排查步骤：

检查服务器的网络连接是否正常。

确认服务器的IP地址和端口号配置是否正确。

查看防火墙和安全组规则是否允许外部访问。

## 修复方法：

重新配置网络设置，确保网络连通性。

调整IP地址和端口号配置，确保与外部访问请求匹配。

修改防火墙和安全组规则，开放相应的访问端口。

# 2、数据库连接失败

故障现象：应用程序无法连接到数据库。

## 排查步骤：

检查数据库服务是否正在运行。

确认数据库的连接字符串是否正确。

查看数据库服务器的网络连接和防火墙设置。

## 修复方法：

重启数据库服务，确保其正常运行。

核实并修正数据库连接字符串。

配置数据库服务器的网络连接和防火墙规则，允许应用程序的访问。

# 3、磁盘空间不足

故障现象：服务器磁盘空间告急，影响系统性能。

## 排查步骤：

使用 `df -h` 命令查看各分区的磁盘使用情况。

分析哪些文件和目录占用了大量空间。

## 修复方法：

清理不必要的临时文件和日志文件。

转移或删除长期未使用的数据。

考虑增加磁盘容量或优化存储策略。

# 4、CPU使用率过高

故障现象：服务器CPU使用率长时间保持在高位，导致系统响应缓慢。

## 排查步骤：

使用 `top` 或 `htop` 命令查看当前CPU使用情况。

分析哪些进程占用了大量CPU资源。

## 修复方法：

优化占用CPU资源较多的进程，如调整算法、减少不必要的计算等。

升级硬件，提高CPU性能。

考虑使用负载均衡技术分散CPU负载。


# 5、内存泄漏

故障现象：服务器内存使用量持续增长，最终导致内存耗尽。

## 排查步骤：

使用 `free -m` 命令查看内存使用情况。

通过工具（如valgrind）检测内存泄漏。

## 修复方法：

修复导致内存泄漏的代码。

增加服务器内存或优化内存管理策略。

# 6、网络延迟高

故障现象：网络连接延迟较高，影响数据传输速度。

## 排查步骤：

使用ping命令测试网络延迟。

分析网络拓扑结构，查找可能的瓶颈。

## 修复方法：

优化网络配置，如调整路由器和交换机的设置。

升级网络设备，提高网络带宽和传输速度。

# 7、DNS解析失败

故障现象：无法解析域名，导致无法访问网络资源。

## 排查步骤：

使用 `nslookup` 或 `dig` 命令测试DNS解析。

检查DNS服务器的配置和状态。

## 修复方法：

修复或更换故障的DNS服务器。

配置备用DNS服务器，提高解析的可靠性。


# 8、应用服务崩溃

故障现象：应用服务突然停止运行，无法提供服务。

## 排查步骤：

查看应用服务的日志文件，分析崩溃原因。

检查系统资源（如CPU、内存）是否充足。

## 修复方法：

根据日志文件中的错误信息修复应用服务。

优化系统资源分配，确保应用服务正常运行。

# 9、文件系统损坏

故障现象：文件系统出现错误，导致数据访问异常。

## 排查步骤：

使用 fsck 工具检查文件系统的完整性。

分析可能导致文件系统损坏的原因。

## 修复方法：

运行fsck工具修复损坏的文件系统。

加强数据备份和恢复策略，防止数据丢失。

# 10、系统更新失败

故障现象：系统更新过程中出现异常，导致更新失败。

## 排查步骤：

查看系统更新日志，分析失败原因。

检查网络连接和存储空间是否充足。

## 修复方法：

根据日志文件中的错误信息调整更新设置。

确保网络连接稳定且存储空间充足。

尝试手动更新或回滚到之前的系统版本。

# 11、权限配置错误

故障现象：用户无法访问或修改特定资源。

## 排查步骤：

检查文件和目录的权限设置。

确认用户是否属于正确的用户组。

## 修复方法：

修改文件和目录的权限设置，确保用户具有适当的访问权限。

将用户添加到正确的用户组中。

# 12、Web服务器配置错误

故障现象：Web服务器无法正确处理请求或返回错误页面。

## 排查步骤：

检查Web服务器的配置文件（如Apache的httpd.conf或Nginx的nginx.conf）。

分析Web服务器的日志文件，查找错误提示。

## 修复方法：

根据配置文件和日志文件中的错误信息调整Web服务器设置。

重启Web服务器以使配置生效。

# 13、邮件服务故障

故障现象：邮件无法发送或接收。

## 排查步骤：

检查邮件服务器的运行状态和日志文件。

确认邮件服务器的网络连接和DNS设置。

## 修复方法：

修复邮件服务器的故障或重启服务。

配置正确的网络连接和DNS设置，确保邮件传输畅通无阻。

# 14、备份失败

故障现象：数据备份过程中出现异常，导致备份失败。

## 排查步骤：

查看备份日志，分析失败原因。

检查备份存储设备的状态和容量。

## 修复方法：

根据日志文件中的错误信息调整备份设置。

确保备份存储设备状态正常且容量充足。

尝试重新执行备份操作或恢复之前的备份。

# 15、负载均衡不均

故障现象：负载均衡器未能将请求均匀分配到各个后端服务器。

## 排查步骤：

检查负载均衡器的配置和状态。

分析后端服务器的负载情况，查找负载不均的原因。

## 修复方法：

调整负载均衡器的配置，确保请求能够均匀分配。

优化后端服务器的性能，提高处理请求的能力。

# 16、防火墙规则错误

故障现象：防火墙规则配置不当，导致无法访问特定资源或服务。

## 排查步骤：

检查防火墙的规则配置。

分析受影响的资源或服务是否受到防火墙规则的限制。

## 修复方法：

调整防火墙规则，确保受影响的资源或服务能够正常访问。

定期审查和更新防火墙规则，以适应业务变化和安全需求。

# 17、SSH连接失败

故障现象：无法通过SSH连接到远程服务器。

## 排查步骤：

检查SSH服务的运行状态。

确认SSH服务的端口和IP地址配置是否正确。

查看服务器的防火墙规则是否允许SSH连接。

## 修复方法：

重启SSH服务，确保其正常运行。

核实并修正SSH服务的端口和IP地址配置。

配置服务器的防火墙规则，允许SSH连接。

# 18、数据库性能下降

故障现象：数据库查询速度变慢，响应时间延长。

## 排查步骤：

使用数据库性能分析工具（如MySQL的EXPLAIN命令）检查查询计划。

分析数据库的索引和表结构是否合理。

## 修复方法：

优化数据库查询语句，减少不必要的计算和数据传输。

创建或调整数据库索引，提高查询效率。

对数据库表结构进行优化，如分区或归档旧数据。

# 19、应用依赖问题

故障现象：应用程序无法正常运行，提示缺少依赖项。

## 排查步骤：

检查应用程序的依赖项列表。

确认依赖项是否已正确安装并配置。

## 修复方法：

安装缺失的依赖项。

配置依赖项的环境变量和路径。

确保依赖项的版本与应用程序兼容。

# 20、虚拟机故障

故障现象：虚拟机无法正常启动或运行异常。

## 排查步骤：

检查虚拟机的配置文件和日志文件。

分析虚拟机的硬件资源和操作系统状态。

## 修复方法：

根据日志文件中的错误信息修复虚拟机的配置或操作系统。

调整虚拟机的硬件资源分配，如CPU、内存和存储。

尝试重启虚拟机或恢复其快照以解决问题。

# 参考资料

https://mp.weixin.qq.com/s/jtAnL5_HRKNbowyw95m3yw

* any list
{:toc}