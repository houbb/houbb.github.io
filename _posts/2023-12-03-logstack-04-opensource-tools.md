---
layout: post
title: logstack 日志技术栈-04-opensource 开源工具
date: 2023-10-30 21:01:55 +0800
categories: [Log]
tags: [log, elk, sh]
published: true
---

# 日志技术栈

日志管理包含日志数据存储、处理、分析和可视化，通过利用日志管理工具，可以监控性能趋势、解决问题、检测异常并优化整体系统性能。

近年来，开源日志管理解决方案在大家寻求灵活且经济有效的方式来管理现代系统典型的大量日志数据时，获得了显著的关注。这些工具为商业产品提供了有力的替代方案，使各种规模的企业都能有效地管理日志数据。

在这篇文章中，我们将讨论六种开源日志管理工具，这些工具为在生产环境中有效管理日志数据提供了灵活且经济有效的解决方案。我们将探讨它们的能力以及优缺点，以便你可以为自己的业务选择合适的解决方案。

# 1. OpenObserve

![OpenObserve](https://img-blog.csdnimg.cn/img_convert/5b4c4cbf9796d3f72d7c4c003d0835d7.jpeg)

OpenObserve 是一个基于 Rust 的开源平台，可以通过支持日志、指标和追踪来满足你所有的可观察性需求。

它的目标是提供一个平台，该平台可以替代 Prometheus 用于指标、Elasticsearch 用于日志、Jaeger 用于链路追踪、Grafana 用于仪表板等，并且他还可以和 S3、GCS、Minio、Azure Blob 等对象存储服务兼容使用，比 Elasticsearch 低 140 倍的存储成本。

使用 OpenObserve，你不需要学习新的查询语言来查询日志，因为它支持 SQL 作为其主要的日志和追踪查询语言，以及 PromQL 用于查询指标数据。它也非常容易安装和操作，由于其基于 Rust 来编写的，所以它只需要很少的资源来运行。

它还提供了一个直观且易于使用的 UI 界面，允许你管理和可视化你正在收集的各种可观察性数据。在摄取或查询时，你可以丰富、解析、删除敏感数据，并删除日志的不需要的部分，以便只留下相关的部分。

OpenObserve 还提供了一个内置的报警机制，可以将警报发送到 Slack、Microsoft Teams 和其他渠道。它还支持团队成员之间的协作，并使用基于角色的访问控制来根据团队成员的级别控制对数据的访问，确保你的数据的整体安全。

## OpenObserve 的优点

在一个包中提供日志、指标、链路追踪、仪表板、报警和函数支持。

免费计划提供每月 200GB 的摄取和 15 天的保留。

支持日志查询的 SQL 和指标的 PromQL。

团队的基于角色的访问控制。

由于其高效的数据存储过程，存储成本要低得多。

用 Rust 编写以获得高性能。

## OpenObserve 的缺点

作为一个相对较新的产品，它没有像其他已经存在了更长时间的解决方案那样经过长时间的测试。

在撰写本文时，对日志和链路追踪的支持比指标更成熟。


# 2. Grafana Loki

![Grafana Loki](https://img-blog.csdnimg.cn/img_convert/345a752ffe2d40181f951c4d50b3cb94.jpeg)

Loki 是由 Grafana 团队制作的一个日志管理系统，它根据开源 AGPLv3 许可证发布。由于其日志存储机制，它是独一无二的，只对每个日志流的标签和元数据进行索引，而不是日志的内容。这使它需要更少的存储空间，也可以更快地处理日志消息。然而，这种方式的缺点是，与其他平台相比，它在日志搜索功能上就不那么好用了。

它使用 Promtail（专门为 Loki 构建的日志收集器）通过 HTTP API 拉取日志。然后将日志分组成流并用标签进行索引，但是为了提高性能和降低存储成本，日志的文本并未被索引。一旦日志在 Loki 中，它们可以使用 Loki 的查询语言 LogQL 进行检索。它还与 Grafana 无缝集成，用于通过其可定制的仪表板显示从日志数据生成的各种数据。

Loki 还提供了一个强大的报警系统，你可以创建在满足某些条件时将触发的规则，然后将它们发送到 Prometheus AlertManager，然后将它们路由到适当的目的地，这确保了能够快速识别并及时解决关键问题。

部署 Grafana Loki 有 3 个方式：

单机模式：适合小型部署和开发环境。

微服务模式：适合大型部署和生产环境。

Grafana Cloud：由 Grafana 团队托管的 SaaS 解决方案。

## Grafana Loki 的优点

与 Grafana 无缝集成，提供了强大的可视化功能。

由于其独特的索引策略，存储和处理日志的成本较低。

提供了一个强大的报警系统。

支持多种部署选项。

## Grafana Loki 的缺点

日志搜索功能不如其他平台简单直接。

需要学习新的查询语言 LogQL。

# 3. SigNoz

![SigNoz](https://img-blog.csdnimg.cn/img_convert/6fc2985b0b311b95be4dc1360e08f589.jpeg)

SigNoz 是一个日志收集和分析工具，可以收集和管理来自各种来源的日志、指标、跟踪和异常。

它为使用 OpenTelemetry 检测应用程序提供本机支持，以防止供应商锁定，将收集到的数据存储在 ClickHouse 中，然后在用户友好的仪表板中聚合和可视化数据。

借助 SigNoz，您可以使用其查询生成器、PromQL 或 ClickHouse 查询轻松设置警报的动态阈值。

其查询生成器简化了搜索和过滤日志的过程，任何触发的警报都会通过 Slack、PagerDuty 等渠道向您发送通知。

SigNoz 还支持与流行框架和技术的集成，使其与广泛的应用程序堆栈兼容。这使您能够主动监控和优化各种服务，以提高其性能、更快地排除故障和修复问题，并增强其整体可靠性。

SigNoz 采用模块化架构构建，可以轻松扩展以满足您不断增长的需求。您可以灵活地定义自己的保留期和采样率，仅根据应用程序负载优化数据存储成本。

## SigNoz 的优点

提供了一个全面的解决方案，包括指标、追踪和日志。

使用 OpenTelemetry 进行数据收集，可以轻松地与你的应用程序集成。

提供良好的默认设置，可以将其安装在 Kubernetes 集群中，并立即开始收集日志和指标。

开箱即用地提供图表和可视化功能。

自动计算重要的指标，如错误率和 99 百分位数。

可以轻松设置动态警报阈值，并及时发送通知。

## SigNoz 的缺点

文档可能不够清晰，因为它主要涵盖存储和保留期配置。

升级有时会导致问题。

统一的仪表板目前不可用。

定制性有限。

# 4. Graylog

![Graylog](https://img-blog.csdnimg.cn/img_convert/835fb3f07e2c362d9ac5c351e3febf9a.jpeg)

Graylog 是一个开源日志管理平台，可简化日志数据的收集、存储和分析过程。它从不同来源收集日志，解析和丰富它们，然后将它们存储在数据库中以供将来分析。正如它支持多个输入源一样，它能够将收集到的数据转发到其他系统，例如 Elasticsearch。

借助 Graylog 先进的搜索功能，您可以在几毫秒内快速浏览 TB 级的数据，甚至可以保存搜索查询以供将来使用。其可定制的仪表板提供了基本指标和数据的清晰可视化，从而提供了应用程序活动的全面概述。此外，您可以轻松创建和调度报告，这些报告会自动发送到您的收件箱。

Graylog 还擅长主动监控，允许定期搜索，在满足预定义条件时触发通知。

通过指定搜索的时间范围和频率，可以轻松配置这些警报阈值。您还可以利用 Graylog Marketplace 中提供的插件来增强警报条件和其他业务用例。

## Graylog 的优点

提供团队协作功能。

简洁且用户友好的界面。

能够接收来自各种来源的日志。

快速而复杂的日志搜索。

支持可定制的警报阈值。

## Graylog 缺点

部署比较麻烦。

插件安装和优化可能具有挑战性。

# 5. Syslog-ng

![Syslog-ng](https://img-blog.csdnimg.cn/img_convert/3cdbce0716150807d24687e5502d66af.jpeg)

Syslog-ng 是一个开源的日志管理解决方案，主要用于收集和处理日志数据。它可以从多种源收集日志，包括系统日志、网络设备日志和第三方应用日志。

然后将日志解析、分类、重写和关联到统一格式中，然后将其存储或安全地传输到不同的系统（如 Apache Kafka 或 Elasticsearch）。这消除了您部署多个代理的需要，因为它允许您在一个地方执行所有数据管理过程。

Syslog-ng 提供快速搜索和故障排除功能，并使用正则表达式和布尔运算符进行复杂过滤，使您能够轻松实时定位、过滤和解析日志消息。

这有助于快速提取关键信息，并因此加快故障排除和问题解决速度。通过利用其多线程处理结构，Syslog-ng 可以实现卓越的性能，在配置依赖下每秒处理超过 500k 条日志消息。

通过使用 C、Python、Java、Lua 或 Perl 编写的插件，可以扩展其功能以适应任何用例。Syslog-ng 支持 RFC3164、RFC5424、JSON 和 Journald 等不同的消息格式。它可以在多个操作系统和架构上运行，包括 Linux、Solaris 和 BSD。它还支持 UDP、TCP、TLS 和 RELP 等各种日志传输协议，实现安全可靠的日志传输。

## Syslog-ng 的优点

性能非常高。

快速搜索和故障排除。

支持多种消息格式。

由于其传输协议，日志传输安全。

它可以与 Redis 和 MongoDB 等不同数据库无缝对接。

## Syslog-ng 的缺点

学习和理解配置语法可能需要一些时间。

# 6. Highlight.io

![Highlight.io](https://img-blog.csdnimg.cn/img_convert/89795a6999f477775a81c561476cc88c.jpeg)

Highlight.io 是一个开源的日志管理工具，专为开发者和运维团队设计，用于收集、索引和分析日志数据。它使用 Elasticsearch 作为其后端存储，提供了一个强大的搜索和分析功能。

Highlight 是一个全栈监控平台，不仅提供日志管理，还提供会话重放和错误监控，利用 ClickHouse 进行数据存储和检索。它旨在使您能够跟踪应用程序的行为、识别错误或错误、分析日志并轻松找到性能问题的根本原因。

只需两行代码，您就可以在安装此工具后开始使用它进行日志记录。它将立即开始从您的应用程序收集日志。然后可以轻松搜索和查询这些日志消息和属性。它还允许您将警报设置为当日志达到指定阈值时所需的频率。您将通过支持的渠道收到通知，包括电子邮件、Slack、Discord 或 webhooks。

Highlight 与所有流行的现代框架无缝集成，例如 Python、Golang、Node.js、React、Rails 等等。它允许您以可理解和可操作的方式可视化基础设施的每个部分，从用户点击到服务器错误。它提供免费计划以及灵活的即用即付定价计划，您当然可以自行托管。

## Highlight.io 的优点

提供了一个全面的日志管理解决方案，包括收集、索引和分析。提供了一个直观的用户界面和强大的搜索功能。提供了一个警报系统。

设置简单快捷。

警报功能非常高效。

提供了一个直观的用户界面和强大的搜索功能。

与所有流行的框架无缝协作。

## Highlight.io 的缺点

它没有像其他工具那样经过实战考验。

# 总结

在本文中，我们强调了日志管理的重要性，深入研究了各种开源日志管理工具的功能、优缺点。

选择适当的日志管理解决方案对于全面了解您的架构至关重要，现在比以往任何时候都更需要做出符合您的业务需求的明智决策。

# 参考资料

[2023 年值得关注的 6 个开源日志管理工具](https://blog.csdn.net/easylife206/article/details/132157756)

* any list
{:toc}