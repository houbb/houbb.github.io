---
layout: post
title: Git
date:  2016-10-10 16:09:36 +0800
categories: [Version Control]
tags: [git]
published: true
---

* any list
{:toc}

[Git](https://git-scm.com) is a *free and open source* distributed version control system designed to handle everything from small to very large projects with speed and efficiency.

> [git zh_CN](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)


# Init 

<uml>
    Create project->Git init: git
    Git init->Github: import into    
</uml>

> Create maven project

Use your idea to create a maven project. May like this:

```
D:\CODE\git-demo>tree /f
文件夹 PATH 列表
卷序列号为 00000200 3E45:BF16
D:.
│  git-demo.iml
│  pom.xml
│
├─.idea
│  │  compiler.xml
│  │  misc.xml
│  │  modules.xml
│  │  workspace.xml
│  │
│  └─copyright
│          profiles_settings.xml
│
└─src
    ├─main
    │  ├─java
    │  └─resources
    └─test
        └─java
```

> ```.gitignore``` 

This file can config what type of files you do not want to commit.

```
# maven ignore
target/
*.jar
*.war
*.zip
*.tar
*.tar.gz

# eclipse ignore
.settings/
.project
.classpath

# idea ignore
.idea/
*.ipr
*.iml
*.iws
```

> git init & import to Github

1、you can use this way if you use **IntelliJ IDEA**

```
VCS -> Import into Version Control -> Share Project on Github
```

2、common ways

- create a new repository on the command line

```
echo "# git-demo" >> README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/houbb/git-demo.git
git push -u origin master
```

- push an existing repository from the command line

```
git remote add origin https://github.com/houbb/git-demo.git
git push -u origin master
```

# Base usage 

- git status

show the git files status;

```
$   git status

On branch master

Initial commit

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        .gitignore
        pom.xml

nothing added to commit but untracked files present (use "git add" to track)
```

- git add

add files into local Repository

```
$   git add .gitignore
```

- git commit

commit files into local Repository

```
$   git commit -m "first commit"

[master (root-commit) 965cf5d] first commit
 1 file changed, 6 insertions(+)
 create mode 100644 .gitignore
```

- git push

push files into remote Repository

```
$   git push

fatal: The current branch master has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin master
```

```
$   git push --set-upstream origin master

Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 258 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/houbb/git-demo.git
 * [new branch]      master -> master
Branch master set up to track remote branch master from origin.
```

In this way, we can add another file ```README.md``` into Repository for test, content is:

```
> Hello Git
```

Now, we edit the file ```README.md``` into this:

```
> Hello Git
- git diff
```

- git diff

see the difference between local and Repository

```
$   git diff README.md
diff --git a/README.md b/README.md
index adb219f..e5a680e 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,2 @@
-> Hello Git
\ No newline at end of file
```

- git log

show the log of git 

```
$   git log

commit cd84e273e5ac1d42d08090d013696a237b120751
Author: houbinbin <1060732496@qq.com>
Date:   Mon Oct 10 18:43:33 2016 +0800

    git diff

commit 9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3
Author: houbinbin <1060732496@qq.com>
Date:   Mon Oct 10 18:14:38 2016 +0800

    add readme

```

the ```cd84e273e5ac1d42d08090d013696a237b120751``` is ```commit_id```, the uk of commit.


# Time data back

> The version recall

In Git, ```HEAD``` stands for current version, in our demo is ```cd84e273e5ac1d42d08090d013696a237b120751```.
```HEAD^``` stands for last version, the version before last is ```HEAD^^```, 
the last 100 version can write as ```HEAD~100```

- git reset

If we want to recall version into ```9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3``` (add readme)

```
$   git reset --hard 9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3
```

and then, the content of ```README.md``` is:

```
> Hello Git
```

- git reflog

now, how can we recall to version of ```cd84e273e5ac1d42d08090d013696a237b120751```(git diff)?

use ```git reflog``` can get all commits you have done.

```
$ git reflog

9f18a0c HEAD@{0}: reset: moving to 9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3
cd84e27 HEAD@{1}: merge origin/master: Fast-forward
9f18a0c HEAD@{2}: reset: moving to 9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3
cd84e27 HEAD@{3}: merge origin/master: Fast-forward
9f18a0c HEAD@{4}: reset: moving to 9f18a0cd10ac0eb661ab1a9bf056398c5e6fe6f3
cd84e27 HEAD@{5}: commit: git diff
9f18a0c HEAD@{6}: commit: add readme
965cf5d HEAD@{7}: commit (initial): first commit
```

then

```
$   git reset --hard cd84e27
HEAD is now at cd84e27 git diff
```

and now, the content of ```README.md``` is:

```
> Hello Git
- git diff
```

> Working Directory & Stage

- Working Directory

the maven project can seem as a **Working Directory**
 
- Repository

the files of our project, you can see the  ```.git``` dir, it includes ```stage```、and the first branch ```master```

```
$   dir /a

2016/10/10  18:53    <DIR>          .
2016/10/10  18:53    <DIR>          ..
2016/10/10  18:54    <DIR>          .git
2016/08/03  17:16                56 .gitignore
2016/10/10  19:06    <DIR>          .idea
2016/10/10  18:48                 0 git
2016/10/10  16:53               862 git-demo.iml
2016/10/10  16:52               419 pom.xml
2016/10/10  18:53                23 README.md
2016/10/10  16:52    <DIR>          src
```

- git add

add files into **stage**

- git commit

commit all files in **stage** into current branch, now is **master**

# Branch

> [wiki](https://github.com/Kunena/Kunena-Forum/wiki/Create-a-new-branch-with-git-and-manage-branches)

> [usage](http://blog.csdn.net/wfdtxz/article/details/7973608)

> [merge](http://blog.csdn.net/syc434432458/article/details/51861483)

![idea]({{site.url}}/static/app/img/git/2016-09-02-git-merge.png)


- view branch

> remote

```
git branch -a
```

> local

```
git branch
```

- create branch

```
D:\CODE\blog>git branch blog_0930

D:\CODE\blog>git push origin blog_0930
Total 0 (delta 0), reused 0 (delta 0)
To https://github.com/houbb/blog.git
 * [new branch]      blog_0930 -> blog_0930

D:\CODE\blog>git checkout blog_0930
Switched to branch 'blog_0930'

D:\CODE\blog>git branch
* blog_0930
  master
```

- merge branch

```

$ git checkout master

$ git pull

$ git checkout branch

$ git rebase master     (用rebase合并主干的修改，如果有冲突在此时解决)

$ git checkout master

$ git merge branch

$ git push

```

- remove local branch

```
$   git branch -d xxxxx
```

# Revert 

- revert un-commit file

```
$   git checkout ${fileName}
```

- revert un-commit files

```
$   git checkout *.*
```

like ```git checkout *.java``` will revert all un-commit java files.

- revert all un-commit changes

```
$   git checkout
```







