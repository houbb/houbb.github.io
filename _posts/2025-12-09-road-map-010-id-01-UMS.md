---
layout: post
title: 成熟企业级技术平台 MVE-010-UMS 平台
date: 2025-12-09 21:01:55 +0800
categories: [MVE]
tags: [mve, sh]
published: true
---

# 概览

```
P0（身份访问）
├── UMS（用户中心）
├── Passport（认证 / Token）
├── permission 权限中心（RBAC / ABAC）
├── SSO
P1（身份治理）
├── 身份治理 IGA
├── 审计系统
├── 跳板机 / 堡垒机
```

# 相关开源项目

可以参考一下老马开源的项目：

敏感词核心库: https://github.com/houbb/sensitive-word

敏感词控台：https://github.com/houbb/sensitive-word-admin

日志脱敏：https://github.com/houbb/sensitive

加密工具：https://github.com/houbb/encryption-local

# chat

## 一、平台定位

### 1️⃣ 核心目标

* **统一用户身份管理**：提供企业级用户身份唯一标识和全生命周期管理。
* **支持权限体系**：支撑 RBAC / ABAC / 分布式访问控制。
* **对接上游应用与下游系统**：提供 SSO / API / SDK 接口。
* **安全与合规**：满足审计、隐私、数据脱敏等要求。

### 2️⃣ 在企业体系中的位置

```
身份与访问管理（IAM）
├── UMS（用户管理）
├── App-Manage（应用管理）
├── Permission（权限管理）
├── Passport / SSO（统一认证）
└── Audit（审计与合规）
```

* UMS 是 **IAM 的基础用户服务层**，其他权限、应用管理、认证等模块都依赖 UMS。

---

## 二、核心功能模块

```
UMS 平台
├── 用户中心
├── 组织管理
├── 角色管理
├── 权限关联
├── 身份认证集成
├── 用户行为与安全
└── 数据审计与报表
```

### 1️⃣ 用户中心

* 用户注册、导入、同步（LDAP、AD、第三方系统）
* 用户信息管理（基本信息、联系信息、身份属性）
* 用户状态管理（激活、冻结、注销）
* 多租户 / 分域支持

### 2️⃣ 组织管理

* 企业组织结构建模（公司、部门、团队）
* 用户与组织关系绑定
* 支持多层级组织查询与权限继承
* 支持动态组织调整对权限和审批流程的影响

### 3️⃣ 角色管理

* 角色创建、修改、删除
* 角色与用户绑定（RBAC 模型）
* 角色继承与分层设计
* 支持自定义角色粒度（系统级、业务级）

### 4️⃣ 权限关联

* 用户 → 角色 → 权限映射
* 支持资源维度授权（资源 + 动作 + dataScope）
* 权限变化实时生效
* 与 PEP / 权限引擎对接，实现访问控制

### 5️⃣ 身份认证集成

* 支持 SSO / OAuth2 / OIDC / SAML
* 多因素认证（MFA / OTP / WebAuthn）
* 支持密码策略、密码过期和安全问题
* 集中管理第三方账号登录

### 6️⃣ 用户行为与安全

* 登录日志、访问记录
* 异常行为检测（异常登录、暴力破解、权限滥用）
* 安全事件告警

### 7️⃣ 数据审计与报表

* 用户生命周期变更审计
* 角色与权限变更记录
* 合规报表输出（满足 ISO / SOC / GDPR 要求）
* API / UI 报表导出

---

## 三、核心技术能力

| 能力            | 说明                            |
| ------------- | ----------------------------- |
| 身份唯一标识        | 企业范围唯一的 user_id / external_id |
| 数据一致性         | 支持主从同步、事件驱动变更同步               |
| 高可用与分布式       | 支持跨地域部署，高并发用户管理               |
| API / SDK 服务化 | REST / GraphQL / gRPC 接口供应用调用 |
| 安全策略          | 密码策略、MFA、多域隔离、审计链路            |
| 扩展性           | 支持插件式扩展第三方系统、组织同步、权限策略        |

---

## 四、UMS 与其他系统的关系

```
应用系统 / 服务
       ↓
    Permission Engine
       ↓
      UMS  <─> Passport / SSO
       ↓
   Audit / Logging
```

* **上游**：应用系统请求用户信息、验证用户权限
* **下游**：认证系统、审计系统、权限引擎依赖 UMS 提供基础用户信息
* **交互方式**：API / Event / Sync Task

---

## 五、企业级架构设计

### 1️⃣ 逻辑架构

```
UMS Platform
├── 用户服务层
│   ├── 用户 CRUD
│   ├── 用户属性管理
│   └── 用户状态管理
├── 组织与角色层
│   ├── 组织管理
│   ├── 角色管理
│   └── 权限关联管理
├── 接口与集成层
│   ├── REST API / gRPC
│   ├── SDK / CLI
│   └── 第三方系统同步
├── 安全与审计层
│   ├── MFA / SSO
│   ├── 登录与操作日志
│   └── 数据审计报表
└── 数据存储与缓存层
    ├── 用户主数据
    ├── 缓存（Redis / Memcached）
    └── 异步消息队列（事件通知）
```

### 2️⃣ 数据模型核心表（示例）

* `user`（用户主表）
* `organization`（组织结构表）
* `role`（角色表）
* `user_role`（用户角色关联表）
* `permission`（权限表）
* `user_permission` / `role_permission`（关联表）
* `login_log`（登录审计表）
* `user_event_log`（用户操作审计表）

---

## 六、典型功能场景

| 场景      | 描述                        |
| ------- | ------------------------- |
| 新员工入职   | LDAP / HR 系统同步用户信息，分配默认角色 |
| 部门调动    | 组织关系调整自动同步权限              |
| 账号注销    | 冻结/注销用户，触发权限回收            |
| 跨系统单点登录 | 用户登录一次，访问所有关联应用           |
| 权限变更    | 角色权限变更实时生效，自动通知下游系统       |
| 安全审计    | 定期生成用户操作与权限变更报表           |

---

## 七、UMS 平台建设价值

1. **统一身份管理**：解决企业多系统账号分散问题
2. **降低权限管理复杂度**：集中控制角色与权限
3. **支持安全与合规**：满足审计、隐私、合规要求
4. **提升开发效率**：应用系统无需重复实现用户管理
5. **支撑企业级 IAM 架构**：基础能力为 SSO、权限、审计提供数据支撑


* any list
{:toc}