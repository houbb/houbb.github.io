---
layout: post
title:  ã€leetcodeã€‘ä»€ä¹ˆæ˜¯å·®åˆ†æ•°ç»„ï¼ˆDifference Arrayï¼‰
date:  2020-6-8 15:13:08 +0800
categories: [Algorithm]
tags: [algorithm, prefix-sum, difference-array, leetcode]
published: true
---

# å¼€æºåœ°å€

ä¸ºäº†ä¾¿äºå¤§å®¶å­¦ä¹ ï¼Œæ‰€æœ‰å®ç°å‡å·²å¼€æºã€‚æ¬¢è¿ fork + star~

> [https://github.com/houbb/leetcode](https://github.com/houbb/leetcode)

# å·®åˆ†æ•°ç»„

## ä¸€ã€ä»€ä¹ˆæ˜¯å·®åˆ†æ•°ç»„ï¼Ÿ

å·®åˆ†æ•°ç»„æ˜¯ä¸€ç§ **é€šè¿‡ä¿®æ”¹ç«¯ç‚¹æ¥å½±å“ä¸€ä¸ªåŒºé—´çš„å€¼** çš„æŠ€å·§ï¼Œé€‚ç”¨äºè¿™ç§åœºæ™¯ï¼š

> ã€Œå¯¹ä¸€ä¸ªæ•°ç»„ `nums` çš„æŸä¸ªåŒºé—´ `[l, r]`ï¼Œæ•´ä½“åŠ ä¸Šä¸€ä¸ªå€¼ `+k`ï¼Œå¹¶ä¸”è¿™æ ·çš„æ“ä½œä¼šæ‰§è¡Œå¾ˆå¤šæ¬¡ï¼Œä½†æˆ‘ä»¬ä¸å…³å¿ƒä¸­é—´è¿‡ç¨‹ï¼Œåªå…³å¿ƒæœ€ç»ˆæ•°ç»„ã€‚ã€

### âœ… ä¸¾ä¸ªä¾‹å­ï¼š

å‡è®¾æœ‰æ•°ç»„ï¼š

```
nums = [0, 0, 0, 0, 0]
```

æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œè¿™äº›æ“ä½œï¼š

1. æŠŠåŒºé—´ `[1, 3]` æ‰€æœ‰æ•°åŠ ä¸Š 2
2. æŠŠåŒºé—´ `[2, 4]` æ‰€æœ‰æ•°åŠ ä¸Š 3

æœ€ç»ˆæ•°ç»„åº”è¯¥æ˜¯ï¼š

```
[0, 2, 5, 5, 3]
```

---

## äºŒã€å·®åˆ†æ•°ç»„çš„åŸç†

å·®åˆ†æ•°ç»„ `diff[]` çš„å«ä¹‰æ˜¯ï¼š

```java
diff[0] = nums[0];
diff[i] = nums[i] - nums[i - 1];  // ä»ç¬¬1ä½å¼€å§‹
```

é‚£ä¹ˆè¿˜åŸ `nums[]` çš„æ–¹æ³•æ˜¯å‰ç¼€å’Œï¼š

```java
nums[i] = diff[0] + diff[1] + ... + diff[i];
```

---

## ä¸‰ã€åŒºé—´åŠ æ“ä½œæ€ä¹ˆåšï¼Ÿ

å¯¹äºä¸€æ¬¡æ“ä½œï¼š
ã€Œå°†åŒºé—´ `[l, r]` å…¨éƒ¨åŠ ä¸Š `k`ã€ï¼Œåœ¨å·®åˆ†æ•°ç»„ä¸Šï¼Œåªéœ€ï¼š

```java
diff[l] += k;
diff[r + 1] -= k;
```

ä¹‹åï¼Œ**åªéœ€è¦ä¸€æ¬¡å‰ç¼€å’Œ**ï¼Œå°±èƒ½è¿˜åŸå‡ºæ‰€æœ‰ç´¯åŠ åçš„æœ€ç»ˆæ•°ç»„ã€‚

æ„Ÿè§‰å’Œå‰ç¼€å’Œäº’ä¸ºé€†å‘æ“ä½œï¼Ÿ

## åœ¨çº¿å¯è§†åŒ–

> [å‰ç¼€å’Œ](https://houbb.github.io/leetcode-visual/array-difference-array-visual.html)

## å››ã€å®Œæ•´ä»£ç å®ç°ï¼ˆJava ç¤ºä¾‹ï¼‰

```java
// åŸå§‹æ•°ç»„
int[] nums = new int[5]; // [0, 0, 0, 0, 0]

// æ„é€ å·®åˆ†æ•°ç»„
int[] diff = new int[nums.length + 1]; // å¤šå¼€ä¸€ä½é˜²æ­¢è¶Šç•Œ

// åŒºé—´åŠ æ“ä½œå‡½æ•°
void rangeAdd(int l, int r, int k) {
    diff[l] += k;
    if (r + 1 < diff.length) {
        diff[r + 1] -= k;
    }
}

// åº”ç”¨æ“ä½œ
rangeAdd(1, 3, 2);
rangeAdd(2, 4, 3);

// æ¢å¤ç»“æœæ•°ç»„
int[] result = new int[nums.length];
result[0] = diff[0];
for (int i = 1; i < nums.length; i++) {
    result[i] = result[i - 1] + diff[i];
}
```

æ‰§è¡Œå®Œåï¼Œ`result = [0, 2, 5, 5, 3]` âœ…

---

## äº”ã€å·®åˆ†æ•°ç»„çš„åº”ç”¨åœºæ™¯

### âœ… 1. å¤šæ¬¡åŒºé—´ä¿®æ”¹

ä¾‹å¦‚æ¯æ¬¡å°†æŸæ®µåŒºé—´åŠ ä¸Š/å‡å»æŸä¸ªå€¼ï¼Œä½†ä¸å…³å¿ƒä¸­é—´å€¼ï¼Œåªå…³å¿ƒæœ€åçš„ç»“æœã€‚

å…¸å‹ä¾‹é¢˜ï¼š

* Leetcode 370. [åŒºé—´åŠ æ³•](https://leetcode.cn/problems/range-addition/)
* Leetcode 1109. [èˆªç­é¢„è®¢ç»Ÿè®¡](https://leetcode.cn/problems/corporate-flight-bookings/)

---

### âœ… 2. å¤šæ¬¡ä¿®æ”¹ååˆ¤æ–­æŸä¸ªä½ç½®æ˜¯å¦æ»¡è¶³æ¡ä»¶

å¦‚ï¼šæŸä¸ªæ—¶é—´æ®µäººæµé‡å¢åŠ ï¼Œæœ€ç»ˆåˆ¤æ–­æŸæ—¶åˆ»äººæ•°æ˜¯å¦è¶…è½½ã€‚
è¿™ç§å¸¸è§äºè°ƒåº¦ã€èˆªç­ã€ä¼šè®®ã€äº‹ä»¶æ¨¡æ‹Ÿç­‰é—®é¢˜ã€‚

---

## å…­ã€å·®åˆ† vs å‰ç¼€å’Œ çš„å¯¹æ¯”

| ç‰¹æ€§    | å‰ç¼€å’Œ             | å·®åˆ†æ•°ç»„           |
| ----- | --------------- | -------------- |
| é€‚åˆåœºæ™¯  | å¿«é€ŸæŸ¥è¯¢åŒºé—´å’Œ         | å¿«é€Ÿæ‰§è¡ŒåŒºé—´åŠ æ“ä½œ      |
| æŸ¥è¯¢    | O(1) æŸ¥è¯¢ä»»æ„åŒºé—´å’Œ    | O(n) é‡å»ºåŸæ•°ç»„åå†æŸ¥è¯¢ |
| ä¿®æ”¹    | O(n) ä¿®æ”¹åéœ€è¦é‡å»ºå‰ç¼€å’Œ | O(1) ä¿®æ”¹å·®åˆ†æ•°ç»„    |
| æ„å»ºå¤æ‚åº¦ | O(n)            | O(n)           |

---

## ä¸ƒã€å¸¸è§æ³¨æ„ç‚¹

* `diff` æ•°ç»„ä¸€èˆ¬è¦å¼€ `n+1`ï¼Œé¿å… `r+1` è¶Šç•Œã€‚
* è®°å¾—æœ€å **è¿˜åŸåŸæ•°ç»„æ—¶è¦åšå‰ç¼€å’Œ**ã€‚
* ä»…é€‚ç”¨äº **åŠ æ³•ã€å‡æ³•ç±»å‹çš„åŒºé—´ä¿®æ”¹**ï¼Œä¸æ”¯æŒåŒºé—´ä¹˜ã€é™¤ã€æ›¿æ¢ç­‰ã€‚

---

## å…«ã€ä¾‹é¢˜æ¨è

å½“ç„¶å¯ä»¥ï¼Œä¸‹é¢æ˜¯è¡¥å……äº†**é¢˜ç›®éš¾åº¦**åçš„å®Œæ•´è¡¨æ ¼ï¼Œæ¯é¢˜éƒ½ä¸å·®åˆ†æ•°ç»„ç›¸å…³ï¼š

| é¢˜å·      | é¢˜ç›®      | æŠ€å·§        | éš¾åº¦    |
| ------- | ------- | --------- | ----- |
| LC 370  | åŒºé—´åŠ æ³•    | å·®åˆ†æ•°ç»„      | ğŸ”´ ä¸­ç­‰ |
| LC 1109 | èˆªç­é¢„è®¢ç»Ÿè®¡  | å·®åˆ†æ•°ç»„      | ğŸŸ¡ ä¸­ç­‰ |
| LC 1094 | æ‹¼è½¦      | å·®åˆ† + å®¹é‡åˆ¤æ–­ | ğŸ”´ ä¸­ç­‰ |
| LC 1854 | äººå£æœ€å¤šçš„å¹´ä»½ | å·®åˆ† + æ‰«æçº¿  | ğŸŸ¢ ç®€å• |



# å‚è€ƒèµ„æ–™

* any list
{:toc}