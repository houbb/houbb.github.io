---
layout: post
title: 收单业务第二节-一方支付、二方支付、三方支付、四方支付
date:  2020-5-27 17:02:55 +0800
categories: [Acquire]
tags: [acquire, biz, sh]
published: true
---

# 支付

支付又称付出、付给，多指付款，是发生在购买者和销售者之间的金融交换，是社会经济活动所引起的货币债权转移的过程。

支付包括交易、清算和结算。

## 第一方支付

第一方支付是指货币/现金支付，最原始的支付方式。

![第一方支付](https://pic1.zhimg.com/80/v2-0bbe1bc3b2de328368df1242c5fa9098_1440w.png)

## 第二方支付

第二方支付主要指依托于银行的支付，是通过银行“转帐”的一种支付行为。

![第二方支付](https://pic4.zhimg.com/80/v2-51d7f48a02d6e3fbc89eace4529e31d7_1440w.png)

如：通过银行去完成支付的行为

## 第三方支付

第三方支付是指收款人或付款人通过计算机、移动终端等电子设备，依托公共网络信息系统远程发起支付指令，且付款人电子设备不与收款人特定专属设备交互，由支付机构为收付款人提供货币资金转移服务的活动。

![第三方支付](https://pic4.zhimg.com/80/v2-a089b6d14833551e3c9e538428f9df87_1440w.jpg)

在中国从事第三方支付业务必须申请第三方支付牌照，即央行颁发的《支付业务许可证》，并且需要依法接受央行的监督管理。

如：支付宝、微信支付、拉卡拉、会员宝等都为第三方支付平台。

## 第四方支付

第四方支付又叫聚合支付，是对第三方支付平台服务的拓展。第四方支付是介于第三方支付和商户之间，没有支付许可牌照的限制。

![第四方支付](https://pic2.zhimg.com/80/v2-776f430cc741cf65d1b8ec087084259d_1440w.jpg)

第四方支付属于支付服务集成商，它集合了各个第三方支付及多种支付渠道，能够根据商户的需求进行个性化定制，形成支付通道资源互补优势，满足商户需求，提供适合商户的支付解决方案。

换句话说，第四方支付就是对于第三方支付的一个信息的整合。

# 概述

第三方支付是具备一定实力和信誉保障的独立机构，采用与各大银行签约的方式，提供与银行支付结算系统接口的交易支持平台的网络支付方式。

第三方支付平台是指平台提供商通过通信、计算机和信息安全技术，在商家和银行之间建立连接，从而实现消费者、金融机构以及商家之间货币支付、现金流转、资金清算、查询统计的一个平台。

第三方支付是一种支付方式，或者说是一种支付渠道。

第三方支付平台是第三方支付这种支付方式得以实现所必需的媒介，或者说，第三方支付平台是看得见的第三方支付形式。

# 支付环节

一个完整的支付过程包括**代收、清结算和代付**三个环节。

ps: 当然还有内部的风控，账户等。

代收指第三方支付平台把资金从买方的银行卡转移到第三方支付平台银行账户（或卖方银行账户）的过程。

清结算是支付完成后第三方支付公司与银行、卖方之间处理债权债务关系（如果涉及跨行支付，还涉及银行与银行之间的清结算）

代付可以理解为第三方支付公司在完成清结算之后，结清交易当事人之间的债权债务关系，并最终完成资金转移的过程。

（严格来说，清结算已经包括处理债权债务关系、账簿记录并完成最终货币资金的转移。但这里我们为了把支付的各个环节剖析清楚，把货币资金的转移过程划入代付环节。）

# 分类

对于第三方支付平台来说，在支付环节中，其扮演的角色可能是不同的。

根据第三方支付平台在交易过程中所扮演角色以及参与程度的不同，可以将第三方支付方式分为两种支付方式，即支付网关模式和账户支付模式。

## 支付网关模式

### 1）支付网关定义

在一个完整的交易过程中，银行内部网需要与Internet网进行交互，为了保证银行系统和支付活动的安全性，需要在银行内部网（金融专用网）与Internet网之间建立一道安全屏障，以隔离银行网和 Internet 网，通常我们将其称为支付网关。

### 2）支付网关的作用

解密从 Internet 传过来的通信协议，并按银行专网的协议标准重新打包数据，再传给银行专网，这样银行主机就不用作任何修改；

将从银行专网传过来的通信协议，并按 Internet 的协议标准重新打包数据，加密之后，再在 Interne t网中传输。

### 3）支付网关模式

支付平台只作为支付通道将买方发出的支付指令传递给银行，银行完成转账后再将信息传递给支付平台，支付平台将此信息通知卖方并与卖方进行结算。

支付网关位于Internet 和传统的银行专网之间，其主要作用是安全连接 Internet 和专网，起到隔离和保护银行专网的作用。

在支付网关模式下，第三方支付平台扮演着“通道”的角色，并没有实际涉及银行的支付和清算，只是传递了支付指令。

典型的是首信易支付。

- 流程

![流程](https://pic3.zhimg.com/80/v2-777f889202d63b637a3c90bd890b3416_1440w.png)

卖方平台确认订单——>首信易支付平台选择付款银行（这里选中行）——>跳转至中行界面选择支付方式（可选网银和中银快付，这里选中银快付）——>按“银行”要求完成付款。

### 4）说明

从上面的流程可以知道，网关支付最大的特色就是第三方支付机构只作为银行的网关，相当于银行的看门人，控制谁可以进出银行，至于完成最终的付款操作，用户需要在银行的网站界面上按银行的要求完成付款，注意不同的银行可能要求不一样。

支付网关模式是发展的比较成熟的一种模式了，其核心价值在于集成了各大银行的网关，卖方只需要和一家第三方支付平台的接口相连，用户便可使用绝大部分银行进行付款，大大为商户节省了一家一家接入银行网关的成本。

## 账户支付模式

### 1）支付流程

账户支付指买卖双方必须先到第三方支付平台注册成为第三方支付平台的会员，用户通过网银或其它方式先往虚拟账户中充值（资金流：钱从用户的银行卡划转到第三方支付公司银行账户），用户消费付款时，从虚拟账户直接扣除（这里并不涉及实际的资金划转，只是数据层面上数字的减少），典型的如 Paypal。

ps: 这里从技术实现上看说就有了余额系统，可以让出款留有余地。

- 支付流程

![支付流程](https://pic1.zhimg.com/80/v2-81e49790c9090e5a61ec9148a06032b0_1440w.png)

还是以上面的首信易支付为例。

在第二步的首信易支付界面选择账户支付，然后登陆首信易支付账户（首先得注册成为首信易的会员），然后按照首信易的支付要求完成付款（如输入支付密码，手机验证码等，如果账户余额不足，得先充值）。

### 2）说明

账户支付的优势在于有较强的用户黏性，可以追踪收集用户的消费习惯。

但是账户支付得先充值，用户体验不好，同时涉及到资金池，有较大的政策风险。

# 银行接口

任何一家支付机构后台都要接入一堆银行，来完成代收的操作。

目前银行开放给第三方机构（包括第三方支付平台）的接口大概有四类：

POS 收单接口，网银接口，快捷支付接口和代扣接口。

这四类接口的作用就是把资金从用户的银行卡划转出来。

我们经常所说的网银支付，快捷支付其实是针对银行接口来说的，并不是第三方支付方式，只不过第三方支付平台要完成扣款的操作，必须要接入这些银行接口。

用户在第三方支付平台选择网银进行支付时，此时的第三方支付平台其实也是充当了银行网关的作用。 

但是并不能说网关支付就是网银支付，这是两个不同的概念，网关支付是针对第三方支付平台来说的，网银是针对银行来说的，只不过因为使用银行网银进行支付时，第三方支付平台充当了一个网关的角色，所以经常有人把这两个概念混淆。

下面就第三方支付平台接入的以上四类不同接口进行说明。

## 第三方支付平台+网银接口

第三方支付平台接了银行网银接口后，从银行的角度讲，其只是对外开放了一个网银接口。

对于第三方支付平台来说，这种支付模式其实就是上面讨论的支付网关模式。

经常有人把网银与网关混为一谈，其实这是两个不同的概念，二者是针对不同的主体来说的，所起的作用也不一样。

但是因为第三方支付平台连接网银接口，进行支付跳转时，第三方支付平台充当了一个网关的角色，或者充当了银行的代理，所以经常有人弄混。

从普通用户的感知来讲，这就是平时经常所说的第三方支付平台的网银支付。

但是注意网银与网关不是一码事。

## 第三方支付平台+快捷支付接口

从银行角度讲，这是其对外开放的快捷支付接口，而对于普通用户的感知来说，也是我们经常所说的快捷支付。

进行快捷支付时，第三方支付平台往往会要求用户先在第三方支付平台注册成为会员，然后进行四要素绑卡（姓名、身份证、卡号、银行预留手机），最后才能完成付款。

注：有些商户平台（如P2P）与第三方支付平台深度合作，用户只需要在商户平台界面上完成绑卡即可，整个绑卡流程下来都不会出现第三方支付平台的界面，这是由于用户在商户平台填写的信息都在后台传给了第三方支付平台，然后第三方支付平台为用户隐式注册了第三方平台账户，这么做只是为了让用户的绑卡流程不会被打断，让用户体验好一点而已，原理还是与用户在第三方支付平台显式注册一样。

从第三方支付平台来讲，一般能接上银行快捷支付接口的平台是需要有一定实力的，对于安全性的要求非常高。银行的接口也不是想接就能接的。

从用户体验角度讲，**使用快捷支付比使用网银支付的体验好，一方面快捷支付不需要开通网银，而且一次绑卡之后，第二次就可以直接支付了，方便快捷**。

下面就第三方支付平台与商户平台合作的两种模式分别讲解。

### 1）用户显式注册第三方支付平台账户并绑卡

这里需要注意两点：

1. 在上面的第四步中，点击“立即开通”按纽后跳到第五步时，手机会接收到一条由工商银行（上面绑定是工行的卡）发过来验证码短信，注意工行是发卡行，发过来的信息中开通的是通联支付的快捷支付，说明该p2p平台连接的是通联支付，而通联支付连接了工行的快捷支付接口。

2. 可以看到上面的整个绑卡操作环节并没有出现通联支付的界面，所有的操作都是在p2p界面上完成的，然后在后台把数据传给第三方支付平台通联支付，用户绑卡成功后，会成为通联支付的隐式会员，同时通联会为用户创建一个虚拟账户，用于存放用户的银行卡等信息。换句话说，虽然用户并没有在通联支付界面上操作，也没有一个类似于支付宝账号的通联支付账号可以用于登陆通联支付客户端，但是在通联支付看来，绑卡成功的用户依然成为了通联支付的会员。

## 代扣接口

### 定义

银行代扣接口是银行开放给第三方机构的接口，用户只要一次性签约，第三方机构就可以将资金从用户的签约银行账户里划走，对于接银行代扣接口的第三方机构的资质要求是非常高的，必须具备非常高的信用。

一般这种接口会开放给水电公司，用于用户缴纳每个月的水费，电费，家庭网费等

### 与快捷支付接口的区别与联系

代扣接口是一直都存在的，也是一种非常传统的银行支付接口，为了便民生活。

而快捷支付接口是互联网出来并发展到一定阶段后，银行专门开放给第三方支付公司的接口，其实这两种接口对于银行来说，并无本质区别，因为二者都是在用户在完成签约之后，就可以通过第三方机构把资金从用户的签约银行账户中划走。

但是银行为方便管理，于是给第三方支付公司专门开了一套与代扣接口功能一样的快捷支付接口给第三方支付公司。

这两种接口都需要三方签约，即用户，第三方机构以及银行三方签约。

从用户体验上讲，对于代扣，用户只需要与第三方机构一次性签约，以后资金就会到点被第三方机构划走，而无需用户再输入密码或其它验证手段，最典型的就是每个月月底，水电公司会把水电费从用户的签约卡上划走。

对于快捷支付，用户第一次签约完成后，以后付款时只需要输入第三方支付平台的支付密码或第三方支付平台要求的其它验证手段（如支付宝的动态密码），这里要注意的是，第三方支付平台的支付密码是支付平台为了保证用户的支付安全，而要求用户设置的，与银行无关。

如果支付公司对用户以及自己的系统安全性绝对的信任，是完全可以不要求用户设置支付密码的，但是目前几乎没有支付公司这么玩，因为风险太大。

## POS接口

POS接口是银行开放给第三方支付机构用于线下收单业务的，主要用于pos机刷卡支付。

这个在第三章中会详细阐述。

# 参考资料

[一文说清，何为一方、二方、三方、四方支付!](https://zhuanlan.zhihu.com/p/70025225)

[万字长文，详解线上线下收单业务（一）：第三方支付](https://zhuanlan.zhihu.com/p/25487807)

* any list
{:toc}