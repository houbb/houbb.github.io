---
layout: post
title: SSH
date:  2016-10-23 17:29:22 +0800
categories: [Linux]
tags: [ssh]
published: true
---

* any list
{:toc}

# SSH

> [ssh](http://man.openbsd.org/OpenBSD-current/man1/ssh.1)

## SYNOPSIS

```
ssh	[-1246AaCfGgKkMNnqsTtVvXxYy] [-b bind_address] [-c cipher_spec] [-D [bind_address:]port] [-E log_file] [-e escape_char] 
[-F configfile] [-I pkcs11] [-i identity_file] [-J [user@]host[:port]] [-L address] [-l login_name] [-m mac_spec] [-O ctl_cmd] 
[-o option] [-p port] [-Q query_option] [-R address] [-S ctl_path] [-W host:port] [-w local_tun[:remote_tun]] 
[user@]hostname [command]
```

## DESCRIPTION

ssh (SSH client) is a program for logging into a remote machine and for executing commands on a remote machine. 
It is intended to provide secure encrypted communications between two untrusted hosts over an insecure network. 
X11 connections, arbitrary TCP ports and UNIX-domain sockets can also be forwarded over the secure channel.

- The simple demo

```
$   ssh root@139.196.28.125
```

ssh connects and logs into the specified hostname (with optional user name). 
The user must prove his/her identity to the remote machine using one of several methods (see below).
If command is specified, it is executed on the remote host instead of a login shell.

If command is specified, it is executed on the remote host instead of a login shell.
The options are as follows:


| opt           |   description |
| :------------ |:----------    |
| -1    | Forces ssh to try protocol version 1 only.|
| -2    | Forces ssh to try protocol version 2 only.|
| -4    | Forces ssh to use IPv4 addresses only.|
| -5    | Forces ssh to use IPv6 addresses only.|


# SSH 免密登录

If you want login **B** in **A** without password, you can do it like this:

1、generate ssh key in A

```
ssh-keygen -t rsa
```

It may has three times input, just enter directly. It will generate ```id_rsa``` and ```id_rsa.pub``` in **.ssh**

2、Import A's ```id_rsa.pub``` into B

```
ssh-copy .ssh/id_rsa.pub root@139.196.28.125
```

If A not install ```ssh-copy```, we can do it like this

- copy ```id_rsa.pub``` to B

```
houbinbindeMacBook-Pro:.ssh houbinbin$ scp id_rsa.pub root@139.196.28.125:id_rsa.pub
root@139.196.28.125's password:
id_rsa.pub
```

- import it to B's ```.ssh/authorized_keys```

```
cat id_rsa.pub > .ssh/authorized_keys
```

If the the user you login has no **.ssh**, create it:

```
root@iZuf60ahcky4k4nfv470juZ:~# pwd
/root
root@iZuf60ahcky4k4nfv470juZ:~# mkdir .ssh
```

3、login test

```
houbinbindeMacBook-Pro:~ houbinbin$ ./ali.sh
Welcome to Ubuntu 14.04.4 LTS (GNU/Linux 3.13.0-86-generic x86_64)

 * Documentation:  https://help.ubuntu.com/
New release '16.04.1 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


Welcome to aliyun Elastic Compute Service!

root@iZuf60ahcky4k4nfv470juZ:~#
```