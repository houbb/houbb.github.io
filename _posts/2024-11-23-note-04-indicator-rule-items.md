---
layout: post
title: 监控报警系统应该配置哪些监控项？
date: 2024-11-23 01:18:08 +0800
categories: [Note]
tags: [note, sh]
published: true
---

# 随笔

[从千万粉丝“何同学”抄袭开源项目说起，为何纯技术死路一条？](https://houbb.github.io/2024/11/22/note-02-he-tech)

[数据源的统一与拆分](https://houbb.github.io/2024/11/22/note-03-split-apache-calcite)

[监控报警系统的指标、规则与执行闭环](https://houbb.github.io/2024/11/22/note-04-indicator-rule-execute-mearurement)

[java 老矣，尚能饭否？](https://houbb.github.io/2024/11/22/note-05-is-java-so-old)

[一骑红尘妃子笑，无人知是荔枝来!](https://houbb.github.io/2024/11/22/note-06-lizhi)

# 一个应用需要哪些监控项？

在构建一个高效、稳定的系统时，设置全面的监控是必不可少的。

监控项的选择应该基于系统的具体架构、业务目标和潜在风险。

以下是一些核心监控项，以及监控这些指标的原因：

---

### 一、**基础设施层**
1. **服务器硬件资源**
   - **CPU使用率**  
     监控目的：高CPU使用率可能导致性能瓶颈。
   - **内存使用率**  
     监控目的：内存不足会导致系统崩溃或频繁GC。
   - **磁盘IO和空间**  
     监控目的：磁盘耗尽或IO瓶颈会影响系统的可用性。
   - **网络带宽和延迟**  
     监控目的：检测网络瓶颈、丢包等问题。

2. **虚拟化和容器**
   - **容器资源限制**（如CPU、内存、磁盘空间）  
     监控目的：避免超出容器配额导致应用异常。
   - **主机节点资源利用率**  
     监控目的：保障多个容器或虚拟机的稳定运行。

这些监控项，一般的普米+zabbix 可以支持。

---

### 二、**应用层**
1. **服务健康状态**
   - **接口可用性**  
     监控目的：确保核心业务接口可访问。
   - **响应时间**  
     监控目的：及时发现性能下降问题。
   - **错误率（如5xx、4xx）**  
     监控目的：识别程序异常或配置错误。

2. **应用性能**
   - **请求的QPS/TPS（每秒查询/事务量）**  
     监控目的：评估系统负载能力。
   - **应用线程数和线程池状态**  
     监控目的：避免线程池耗尽导致服务不可用。
   - **GC时间和频率**  
     监控目的：识别Java或其他语言环境中的内存管理问题。

3. **日志异常**
   - **关键字监控（如“ERROR”、“Exception”）**  
     监控目的：快速发现潜在问题。
   - **日志流量突增**  
     监控目的：可能是大规模错误或攻击的信号。


接口可用性: 一般普米探活。

应用性能：qps / 线程池 / GC，一般为 CAT 支持。

日志异常: 一般为日志指标采集+配置。

业务量：一般可以通过 CAT指标 + 日志指标监控？

---

### 三、**数据库层**
1. **连接池**
   - **连接池使用率**  
     监控目的：避免连接耗尽，影响业务正常执行。

2. **查询性能**
   - **慢查询**  
     监控目的：优化性能瓶颈。
   - **查询失败率**  
     监控目的：排查潜在的SQL问题。

3. **数据库资源**
   - **CPU、内存、磁盘IO**  
     监控目的：评估数据库负载。
   - **主从同步延迟**  
     监控目的：确保数据一致性。


数据库资源，本身为普米相关的报警。

### 四、**网络层**
1. **API网关**
   - **请求数量和延迟**  
     监控目的：评估流量和性能。
   - **限流/熔断触发次数**  
     监控目的：识别流量异常或下游问题。

2. **网络连接**
   - **HTTP连接错误率**  
     监控目的：检查连接超时或网络中断。
   - **防火墙规则日志**  
     监控目的：检测可疑访问。

---

### 五、**安全监控**
1. **用户行为**
   - **登录失败次数**  
     监控目的：防止暴力破解。
   - **敏感操作日志**  
     监控目的：追踪潜在的安全风险。

2. **系统漏洞**
   - **异常文件改动**  
     监控目的：检测潜在入侵。
   - **未授权访问**  
     监控目的：发现非法操作。

---

### 六、**业务指标监控**
1. **核心业务流程**
   - **订单数量、支付成功率**  
     监控目的：保证核心业务的正常运行。
   - **用户转化率**  
     监控目的：及时调整策略以提高收入。

2. **自定义指标**
   - 根据系统业务模型定制：例如库存状态、广告点击率等。  
     监控目的：覆盖特定业务需求。

---

### 七、**告警和恢复**
1. **多级告警**
   - 通过邮件、短信、钉钉等方式发送告警信息。
   - 设置多级阈值（如Warning、Critical）。  

2. **自动化恢复**
   - 自动重启服务、重新部署节点。  
     监控目的：提高系统故障处理的自动化程度。

---

### 监控实施的关键原则
1. **全面性**  
   监控系统的各个层级，避免盲区。
2. **实时性**  
   及时收集和处理数据，缩短故障响应时间。
3. **高可用性**  
   监控系统本身需要高可用，避免成为单点故障。
4. **灵活性**  
   支持动态调整指标和告警规则。

---

通过设置上述监控项，系统能够快速发现问题、预防潜在风险，同时为性能优化和容量规划提供数据支持。

# 参考资料

* any list
{:toc}