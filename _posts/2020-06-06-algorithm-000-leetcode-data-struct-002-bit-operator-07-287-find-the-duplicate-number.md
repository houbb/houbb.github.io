---
layout: post
title: leetcode 002-leetcode.287 find-the-duplicate-number åŠ›æ‰£.287 å¯»æ‰¾é‡å¤æ•°
date:  2020-6-8 15:13:08 +0800
categories: [Algorithm]
tags: [algorithm, data-struct, bit-operator, sf]
published: true
---

# ä½è¿ç®—ä¸“é¢˜

[Java Bit Operation-ä½è¿ç®—åŸºæœ¬æ¦‚å¿µä»‹ç»](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-00-base)

[Java Bit Operation-ä½è¿ç®—ç±»å‹è½¬æ¢](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-00-convert)

[leetcode bit operator ä½è¿ç®—å…¥é—¨ä»‹ç»](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-00-intro)

[leetcode 002-leetcode.136 single-number åŠ›æ‰£.136 åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-01-136-single-number)

[leetcode 002-leetcode.137 single-number-ii åŠ›æ‰£.137 åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—II](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-02-137-single-number-ii)

[leetcode 002-leetcode.260 single-number-iii åŠ›æ‰£.260 åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—III](https://houbb.github.io/2020/06/08/algorithm-000-leetcode-data-struct-002-bit-operator-03-260-single-number-iii)


# é¢˜ç›®

ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ nums ï¼Œå…¶æ•°å­—éƒ½åœ¨ [1, n] èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚

å‡è®¾ nums åªæœ‰ ä¸€ä¸ªé‡å¤çš„æ•´æ•° ï¼Œè¿”å› è¿™ä¸ªé‡å¤çš„æ•° ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» ä¸ä¿®æ”¹ æ•°ç»„ nums ä¸”åªç”¨å¸¸é‡çº§ O(1) çš„é¢å¤–ç©ºé—´ã€‚


ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [1,3,4,2,2]
è¾“å‡ºï¼š2

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [3,1,3,4,2]
è¾“å‡ºï¼š3

ç¤ºä¾‹ 3 :

è¾“å…¥ï¼šnums = [3,3,3,3,3]
è¾“å‡ºï¼š3
 


æç¤ºï¼š

1 <= n <= 10^5

nums.length == n + 1

1 <= nums[i] <= n

nums ä¸­ åªæœ‰ä¸€ä¸ªæ•´æ•° å‡ºç° ä¸¤æ¬¡æˆ–å¤šæ¬¡ ï¼Œå…¶ä½™æ•´æ•°å‡åªå‡ºç° ä¸€æ¬¡
 

è¿›é˜¶ï¼š

å¦‚ä½•è¯æ˜ nums ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•°å­—?

ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªçº¿æ€§çº§æ—¶é—´å¤æ‚åº¦ O(n) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ

# ä¸€äº›è§£æ³•å¯¹æ¯”

| è§£æ³•                | ä¿®æ”¹æ•°ç»„          | ç©ºé—´å¤æ‚åº¦  | æ—¶é—´å¤æ‚åº¦        | æ»¡è¶³é¢˜æ„ï¼Ÿ | å¤‡æ³¨       |
| ----------------- | ------------- | ------ | ------------ | ----- | -------- |
| ğŸ† Floyd åˆ¤åœˆï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰ | âœ…ä¸ä¿®æ”¹          | âœ… O(1) | âœ… O(n)       | âœ…âœ…âœ…âœ…  | âœ”ï¸æœ€æ¨è    |
| äºŒåˆ†æŸ¥æ‰¾ï¼ˆå€¼åŸŸï¼‰          | âœ…ä¸ä¿®æ”¹          | âœ… O(1) | âœ… O(n log n) | âœ…âœ…âœ…   | âœ”ï¸åˆç†æ›¿ä»£æ–¹æ¡ˆ |
| å“ˆå¸Œé›†åˆ              | âœ…ä¸ä¿®æ”¹          | âŒ O(n) | âœ… O(n)       | âŒ     | ç©ºé—´è¶…äº†     |
| æ’åºåæ‰¾é‡å¤            | âŒorâœ…ï¼ˆçœ‹æ˜¯å¦åŸåœ°æ’åºï¼‰ | âœ…      | âœ… O(n log n) | âŒ     | å¯èƒ½ä¿®æ”¹äº†æ•°ç»„  |
| åŸåœ°æ ‡è®°ï¼ˆè´Ÿå·ï¼‰          | âœ…ä¿®æ”¹           | âœ…      | âœ…            | âŒ     | ä¸ç¬¦åˆè¦æ±‚    |

# v1-HashMap/HashSet

## æ€è·¯

é€šè¿‡ Hash åˆ¤æ–­å…ƒç´ æ˜¯å¦å·²ç»å­˜åœ¨è¿‡ï¼Œå’Œå‰é¢çš„é¢˜ç›®ç±»ä¼¼ã€‚

## å®ç°

```java
public int findDuplicate(int[] nums) {
    Set<Integer> set = new HashSet<>();
    for(int i = 0; i < nums.length; i++){
        int num = nums[i];
        if(set.contains(num)) {
            return num;
        }
        set.add(num);
    }
    return -1;
}
```

## æ•ˆæœ

20ms 37.19%

æ•ˆæœä¸€èˆ¬

## åæ€

ä¸ç¬¦åˆç¦æ­¢ä½¿ç”¨é¢å¤–ç©ºé—´

## å°ç»“

æ€è·¯ä¸ç®—éš¾ Hash åœ¨è¿™ä¸ªç³»åˆ—çš„é€‚ç”¨æ€§ç‰¹åˆ«å¹¿ã€‚

å…¶å®è¿™ä¸ªå¤æ‚åº¦å°±æ˜¯ O(n)

# v2-æ’åºçš„æ€è·¯

## æ€è·¯

å¾ˆè‡ªç„¶çš„æƒ³åˆ°ï¼Œæ¯”è¾ƒæˆ‘ä»¬åº”è¯¥å…ˆåšä¸€ä¸ªæ’åºã€‚

ç„¶åå†æ¯”è¾ƒï¼Œå’Œä¸‹ä¸€ä¸ªç›¸ç­‰å°±å­˜åœ¨ã€‚

## ä»£ç 

```java
public int findDuplicate(int[] nums) {
    Arrays.sort(nums);
    for(int i = 0; i < nums.length-1; i++){
        if(nums[i] == nums[i+1]) {
             return nums[i];
        }
    }
    return -1;
}
```

## æ•ˆæœ

36ms  9.92%

æ•ˆæœç«Ÿç„¶æ¯”è¾ƒå·®ï¼Œä¼°è®¡æ˜¯ç”¨ä¾‹çš„é—®é¢˜ã€‚

## åæ€

è¿™ä¸ªå¤æ‚åº¦ä¸å¤Ÿï¼Œè¦æ±‚ O(n) çš„è¯

# v3-è´Ÿæ•°æ ‡è®°æ³•

## æ€è·¯

æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªæ•°ï¼Œè®¿é—®åæ ‡è®°ä¸ºåŸæ¥çš„è´Ÿæ•°ã€‚

è¿™æ ·å¦‚æœæœ‰ä¸€ä¸ªæ•°é‡å¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°è¿™ä¸ªæ•°ã€‚

## å®ç°

```java
public int findDuplicate(int[] nums) {
        for (int i = 0; i < nums.length; i++) {
            int val = Math.abs(nums[i]);
            if (nums[val] < 0) {
                return val;
            }
            nums[val] = -nums[val];
        }
        return -1;
}
```

## æ•ˆæœ

3ms å‡»è´¥ 97.58%

## åæ€

ä¸ç¬¦åˆé¢˜æ„ï¼Œä¸å…è®¸ä¿®æ”¹

# v4-äºŒåˆ†

## æ€è·¯

è¿™ä¸ªäºŒåˆ†ä¹ŸæŒºå·§å¦™çš„ï¼Œä¸åšæ’åºï¼Œæˆ‘æ„¿ç§°ä¹‹ä¸ºäºŒåˆ†çš„ç»å…¸ä¹‹ä½œã€‚

æ³¨æ„ä¸æ˜¯å¯¹æ•°ç»„ä¸‹æ ‡äºŒåˆ†ï¼Œè€Œæ˜¯å¯¹ æ•°å€¼èŒƒå›´ [1, n] è¿›è¡ŒäºŒåˆ†ã€‚

ä¸­ä½æ•° mid = (left + right) / 2

ç»Ÿè®¡å°äºç­‰äº mid çš„æ•°æœ‰å¤šå°‘ä¸ªï¼š

å¦‚æœä¸ªæ•° > midï¼Œè¯´æ˜é‡å¤æ•°åœ¨å·¦è¾¹ã€‚

å¦åˆ™åœ¨å³è¾¹ã€‚

## å®ç°

```java
    public int findDuplicate(int[] nums) {
        //å¯¹ æ•°å€¼èŒƒå›´ [1, n] è¿›è¡ŒäºŒåˆ†
        int left = 1;
        int right = nums.length;

        while (left < right) {
            int mid = left + (right-left) / 2;
            int count = 0;
            for (int num : nums) {
                if (num <= mid) count++;
            }

            // å¦‚æœä¸ªæ•° > midï¼Œè¯´æ˜é‡å¤æ•°åœ¨å·¦è¾¹ã€‚
            if(count > mid) {
                right = mid;
            } else {
                left = mid+1;
            }
        }
        return left;
    }
```

## æ•ˆæœ

28ms å‡»è´¥ 10.05%

# v5-å¿«æ…¢æŒ‡é’ˆ

## æ€è·¯

è¿˜è®°å¾—å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æœ‰ç¯å—ï¼Ÿ

å¿«æ…¢æŒ‡é’ˆã€‚

å¯æ˜¯å’Œè¿™ä¸€é¢˜æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ

## æ€ç»´

å°†æ•°ç»„çœ‹æˆé“¾è¡¨ï¼Œå€¼ä¸º next æŒ‡é’ˆï¼ŒæŸ¥æ‰¾ç¯çš„å…¥å£ã€‚

nums[i] æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•ï¼Œå› æ­¤æ•´ä¸ªæ•°ç»„å¯ä»¥çœ‹ä½œä¸€ä¸ªé“¾è¡¨ã€‚

æ•°ç»„ä¸­æœ‰é‡å¤å…ƒç´  â†’ ä¸€å®šä¼šæˆç¯ã€‚

ç”¨ Floyd åˆ¤åœˆæ³•æ‰¾é‡å¤æ•°å­—ï¼ˆç¯çš„èµ·ç‚¹å°±æ˜¯é‡å¤çš„æ•°ï¼‰ã€‚

æˆ‘æ„¿ç§°ä¹‹ä¸ºå¤©æ‰ï¼

## å®ç°

```java
    public int findDuplicate(int[] nums) {
        // äºŒè€…ä»å¼€å§‹ä¸€èµ·èµ°
        int slow = nums[0];
        int fast = nums[0];

        // ç¬¬ä¸€æ¬¡ç›¸é‡
        do {
            // ä¸€æ­¥
            slow = nums[slow];
            // èµ°ä¸¤æ­¥
            fast = nums[fast];
            fast = nums[fast];
        } while (slow != fast);


        // ç¬¬äºŒæ­¥ï¼šä»èµ·ç‚¹å’Œç›¸é‡ç‚¹å‡ºå‘ï¼Œå†æ¬¡ç›¸é‡å°±æ˜¯â€œç¯çš„å…¥å£â€==é‡å¤çš„æ•°
        fast = nums[0];
        while (slow != fast) {
            slow = nums[slow];
            fast = nums[fast];
        }
        
        return slow;
    }
```

## æ•ˆæœ

4ms å‡»è´¥ 95.14%

# å°ç»“

å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¦‚æœæœ‰å…¶ä»–æƒ³æ³•çš„è¯ï¼Œä¹Ÿå¯ä»¥è¯„è®ºåŒºå’Œå¤§å®¶åˆ†äº«å“¦ã€‚

å„ä½æå®¢çš„ç‚¹èµæ”¶è—è½¬å‘ï¼Œæ˜¯è€é©¬æŒç»­å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼

ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†è®²è§£åŠ›æ‰£ç»å…¸é¢˜ç›®ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€æ³¢ï¼Œç²¾å½©å†…å®¹ï¼Œä¸å®¹é”™è¿‡ã€‚

* any list
{:toc}