---
layout: post
title: web3 工作量证明货币 sha256 bitcoin 比特币
date: 2022-10-28 21:01:55 +0800
categories: [web3]
tags: [coin, pow, sh]
published: true
---

# 比特币

比特币（英语：Bitcoin[注 4]，缩写：BTC 或 XBT）是一种基于去中心化，采用点对点网络与共识主动性，开放源代码，以区块链作为底层技术的加密货币，比特币由中本聪于2008年10月31日发表论文，2009年1月3日，创世区块诞生。

在某些国家、央行、政府机关、学术界则将比特币视为虚拟商品，而不认为是货币。

货币金融学认为货币具有交易介质、记账单位、价值储藏三种基本职能，但由于其高度波动性因此不具有后两种基本职能从而不是货币。

# 基本概念

有观点认为，比特币的问世是人们憎恨商品经济中国家主权货币超发、以及货币政策干预、向往礼物经济中社区共识货币自主的结果；比特币的汇率是全球投资者增加或者减少的反应；而比特币的底层技术区块链可应用在各行各业。

通常，首字母大写的“Bitcoin”是指其所使用的比特币技术与网络，而首字母小写的“bitcoin”才是指货币本身。

比特币也是区块链支付系统和虚拟计价工具，由于其采用密码技术来控制货币的生产和转移，而没有中央的发行机构，无法任意增发，交易在全球网络中运行，有特殊的隐秘性，加上不必经过第三方金融机构，因此得到越来越广泛的应用，也成了非法交易的介质。

用户利用个人电脑和智能手机中的加密钱包软件，无需任何银行、信用卡、在线支付公司等中介机构，可随时随地在网络上直接交换物品、服务。

根据剑桥大学2017年的研究，全球有多达580万个加密钱包活跃用户，其中大多数使用比特币。

同时，有观点认为，比特币技术得到了广泛的认可和使用，使人类迎来了区块链时代。

作为记账系统，比特币不依赖中央机构发行新钱、维护交易，而是由区块链完成，用数字加密算法、全网抵御51%算力攻击保证资产与交易的安全。

交易记录以被全体网络电脑收录维护，每笔交易的有效性都必须经过区块链检验确认。

作为记账单位，比特币的最小单位是 0.00000001 （一亿分之一）比特币，称为“1聪”。

如有必要，也可以修改协议将其分割为更小的单位，以保证其流通方便，区块回报每产出21万个区块减半一次，周期大约为4年，最近一次减半在2020年5月12日，而此种收敛等比数列的和必然是有限的。

2018年4月，已经有1700万比特币被开采，剩余400万个比特币，产量已超总额的80%。

2019年5月12日时，比特币总存量约17,695,512个，实际可流通的量还会因为私钥丢失等因素更加减少。

比特币的总发行量达到1910万，整个网络的超过90%比特币已经被开采完。截止到2140年，比特币将被全部开采，总额度略低于2100万枚。

# 区块链（Blockchain） 

区块链（Blockchain）是比特币的一个重要概念，该概念在中本聪的白皮书中提出，区块链是一串使用密码学方法相关系产生的资料块（称为“区块”，block）。

新增的资料块总能链接到上一个区块，即整条区块链的尾部。

比特币点对点网络将所有的交易历史都存储在“区块链”（blockchain）中，所以区块链可以看作记录着比特币交易的账本。

区块链是一群分散的客户端节点，并由所有参与者组成的分布式数据库，是对所有比特币交易历史的记录。

中本聪预计，当资料量增大之后，用户端希望这些资料并不全部存储自己的节点中。

为了实现这一目标，他采用引入散列函数机制。这样客户端将能够自动剔除掉那些自己永远用不到的部分，比方说极为早期的一些比特币交易记录。

中本聪创造了比特币系统的第一个区块，即“创世区块”，并附有一句“The Times 03/Jan/2009 Chancellor on brink of second bailout for banks”，而这句是当天泰晤士报的头版文章标题。

确认一项交易的过程，是由解决一系列计算难题的工作量证明机制来实现的。

工作量证明机制要求电脑的计算能力为某个有限值的情况下，需要运算一定的时间才能解决，这就使得攻击者无法重写、修改交易历史，除非他能够拥有相对比特币点对点网络系统更强大的计算能力，从而能以更快的速度产生区块链（称为"51%攻击"）。

工作量证明机制的难度由系统自动调节，所以新区块的生成平均需时10分钟。

整个比特币点对点网络的节点都会自动检测交易和区块的有效性，并忽略任何违背规则的交易和区块，比如那些产生错误数量的区块，或多次发送同一份额比特币的交易行为。

参与处理区块的客户端可以得到一定量新发行的比特币，以及相关的交易手续费。

为了得到这些新产生的比特币，参与处理区块的用户端需要付出大量的时间和计算力（为此社会有专业挖矿机替代电脑等其他低配的网络设备），这个过程非常类似于开采矿业资源，因此中本聪将资料处理者命名为“矿工”，将资料处理活动称之为“挖矿”。

这些新产生出来的比特币可以报偿系统中的资料处理者，他们的计算工作为比特币点对点网络的正常运作提供保障。 

有鉴于此，其他类似竞争币（Altcoin）都是用了相同的理念去处理端间交易资料，只是在工作量证明机制上进行调整，如采用权益证明（Proof of Stake）和Scrypt算法等。

# 钱包

比特币钱包使用户可以检查、存储、花费其持有的比特币，其形式多种多样，功能可繁可简，它可以是遵守比特币协议运行的各种工具，如电脑客户端、手机客户端、网站服务、专用设备，也可以只是存储著比特币私密密钥的介质，如一张纸、一段暗号、一个快闪U盘、一个文本文档，因为只要掌握比特币的私密密钥，就可以处置其对应地址中包含的比特币。

比特币无法存入一般的银行账户，交易只能在比特币网络上进行，使用前需下载客户端或接入线上网络。

# 地址与私密密钥

比特币在产生地址时，相对应的私密密钥也会一起产生，彼此的关系犹如银行存款的账号和密码，有些在线钱包的私密密钥是存储在云端的，用户只能透过该在线钱包的服务使用比特币。

## 地址

地址用于接收比特币，功能类似银行的存款账号，但不需要实名登记。若只公开地址不必担心里面的比特币被盗走，也没有任何身份信息，也可以离线产生。比特币的地址是由用户的公开密钥经过 SHA-256 散列运算后，再通过 RIPEMD-160 散列运算而得，其长度固定为 160 个比特（bits），通常会利用 Base58 将之编码成一串由英文字母和数字所组成的字符串，以方便显示或散布，其特征是皆以“1”或者“3”开头，隔离见证地址则以“bc1q”作为开头，传统比特币地址区分大小写，但不包括“IlO0”等字符，“1”开头的地址长26~34位，“3”开头的地址长34位，例如"1DwunA9otZZQyhkVvkLJ8DV1tuSwMF7r3v"，地址也可编码成快速反应矩阵码(QR-Code)的形式让移动设备能够便捷地读取复制 。比特币客户端可以离线生成比特币地址（页面存档备份，存于互联网档案馆） 。一个人可以生成并拥有许多比特币地址，并用在不同的交易上，而且除非自己揭露，或与其他资料链接，否则外人无法看出其中的关系。

可用的比特币地址数量接近2161个。形象地说，假如地球上约有263粒沙，那么比特币地址总数远远超过地球上所有沙子的数量（大约是沙子数目的平方的350亿倍）。

## 私密密钥

比特币的私密密钥（私钥，private key），作用相当于金融卡提款或消费的密码，用于证明比特币的所有权。拥有者必须私密密钥可以给交易消息（最常见的，花费比特币的消息）签名，以证明消息的发布者是相应地址的所有者，没有私钥，就不能给消息签名，作为不记名货币，网络上无法认得所有权的证据，也就不能使用比特币，交易时以网络会以公钥确认，掌握私密密钥就等于掌握其对应地址中存放的比特币。

私密密钥必须保密、否则任何人只要拥有某一地址的私密密钥，即可使用其中的比特币。也不能丢失，而且不像金融卡密码遗忘时，用户可以根据当地的金融规范，携带自己的身份证件，亲自前往金融机构据点，办理密码重置后继续使用原来的账户，但若比特币的私钥丢失，将如同忘记保险箱的密码而无法正常打开取用保险箱内的物品，而且没有方法可以重置（除非有事先备份），2013年，有一位英国用户因为不小心丢弃了存有其私密密钥的硬盘，导致里面的7,500个比特币，当时价值750万美元，无法使用。，除非私钥被找到，否则这些比特币将永远闲置在区块链里，不再流通，而使得流通中的比特币减少。

，而要破解私钥的难度很高，这是其中一个作为不记名的比特币的主要安全机制。根据区块链业者Chainalysis的估算，在2017年底时，约有17%至23%，278万个到379万个的比特币因为私钥丢失、密码遗忘等原因，而永远无法使用与进入流通。

比特币私密密钥通常由51比特或52比特字符表示，其编码方式与比特币地址相似。51比特标记法由数字“5”开头，52位标记法由“K”或“L”开头。比特币地址是由比特币公开密钥进行散列运算得出的，公开密钥是可以通过私密密钥推算出的。所以掌握私密密钥就可以推算出私密密钥对应的地址（不可逆），这相当于只需要输入一组正确的密码，就可以推算出账户名称并登录，而无法从账户名称反向推算出密码般。

2013年圣诞节前，12天比特币节目中，Adam Johnson收到Bloomberg电视台的主播Matt Miller送的价值20美元的比特币礼物卡。他开心的打开礼物卡包装，在摄影机前展示了约10秒钟礼物卡，然后，10秒钟之内，钱就不见了。这张礼物卡上面，是一个比特币钱包的地址跟私钥的QR CODE。

# 挖矿

只要能连上网络，和有适当的中央处理器CPU、图形处理器GPU、特殊应用集成电路ASIC等电脑设备，称为“矿机”，任何人都可挖矿。

为了获得系统每十分钟奖励的比特币，找到让账册区块难以被恶意修改但是却易于验证的数学难题，此过程犹如开采矿物一样困难，故称为“挖矿”，使用矿机挖矿的人被称为“矿工”。

挖矿还包含打包和验证数千笔交易成为区块，证明转账者有足够的比特币，防止一币多付的发生，从而赚取比特币手续费。

## 最大开采国

2021年10月，英国剑桥大学另类金融研究中心公布的数据显示，美国已经超过中国，成为世界上最大的比特币开采国。

数据显示，中国在连接到全球比特币网络的计算机运算力中的份额，即所谓的“哈希率”，已经从5月份的44%下降到7月份的零，而在2019年曾高达75%。其他地方的矿工则是已经填补中国空缺，采矿设备制造商将注意力转移到北美和中亚，中国较大的矿工也在转移，尽管这个过程充满了物流方面的困难。

因此，数据显示，美国目前挖矿份额居全球之冠，截至8月底，约占全球哈希率的35.4%，其次是哈萨克斯坦和俄罗斯。

# 扩容与分叉

因为区块容量上限 1MB 以及比特币交易量大增，造成等候确认时间大增，手续费也大幅增加，项目在2017年8月1日开始，实施Segwit2x，即隔离见证加区块大小提升至2MB（2,097,152字节），以实行扩容，增加比特币交易容量。

另有比特币无限，主张不限制区块容量。

名为比特币现金（Bitcoin Cash，BCH）的分叉在2017年8月1日出现，分叉后第一个开始区块为478559，而BCH 478559的区块大小约1.9MB，超过原有区块容量上限，意味着比特币现金的正式诞生，所有在分叉前的比特币持有者将自动拥有同金额的"比特币现金"区块链，区块容量上限立即提升至8MB。

然而，比特币现金的诞生也伴随着不少争议。比如，其最初使用的交易代码并不是"BCH"，而是"BCC"，这正好与另一个加密货币Bitconnect冲突，而且和Bitfinex上代表"Bitcoin Core"的链分叉期货(Chain Split Token)交易代码也是雷同的，这曾经让部分投资者感到混淆。

而且，BCH开发者修改了比特币原有的难度调整算法，引入了"紧急难度调整"(EDA)机制，可以让BCH的挖矿难度在出块较慢的情况下单向剧烈下降，以此从竞争对手BTC链吸引矿工。这种手段被认为可以起到"维持BCH链自身运转不停摆"的作用，但同时也引发了算力在BTC和BCH两条链间大幅迁移"震荡"的现象，导致BCH和BTC都不时发生不同程度的交易确认时间延长问题；而且EDA加速了BCH的新币产生速度，可能导致BCH下一次产量减半提早到来。后来BCH开发者修改了代码，通过一次硬分叉升级将EDA废除，以新的难度调整算法取而代之，消除了EDA存在的难度单向剧烈下调、反馈不够及时等问题，在BCH经过本次硬分叉升级后，算力在BCH和BTC两条链间震荡的不良现象也随之改善、消失。

有人认为目前只有兼容Bitcoin Core客户端的链(即BTC)才是真正的比特币，他们往往会把比特币现金叫做"Bcash"；同时也有人认为比特币现金才是真正的比特币，而且认为"Bcash"这种称呼实质上是一种针对比特币现金的社会工程学攻击手段。

比特币早期布道者Andreas M. Antonopoulos则认为基于比特币的去中心化本质，并不存在一个"真正的比特币"标准答案，每一个人都应该有自己的独立认知。

比特币黄金（Bitcoin Gold，BTG）是2017年10月25日的再次分叉，比特币持有人将生成出等量的比特币黄金币，主要是希望解决日渐中心化的挖矿现象，比特币黄金将采用新的散列算法Equihash，来防止 ASICs 挖矿。

同时，Bitcoin Gold开发也预挖了一部分BTG，作为对团队维持开发工作的支持和激励。

原定在区块494,784（2017年11月）进行的SegWit2x硬分叉, Jeff Garzik主导开发的sha256挖矿分叉已失败，比特币纽约团队主导的GPU挖矿版成功分叉 （页面存档备份，存于互联网档案馆），后续又有数十个比特币分叉，包括Bitcoin Diamond、Super Bitcoin等。

此类分叉的涌现甚至引出了一个新的概念"IFO"，即"首次分叉发行"(Initial Fork Offering)，与"ICO"(Initial Coin Offering，首次代币发行)性质类似。

# 交易

比特币点对点网络将所有的交易历史都存储在区块链中，比特币交易就是在区块链账本上“记账”，通常它由比特币客户端协助完成。

付款方需要以自己的私钥对交易进行数字签名，证明所有权并认可该次交易。比特币会被记录在收款方的地址上，交易无需收款方参与，收款方可以不在线，甚至不存在，交易的资金支付来源，也就是花费，称为“输入”，资金去向，也就是收入，称为“输出”。

如有输入，输入必须大于等于输出，输入大于输出的部分即为交易手续费。

矿工产出交易没有输入，只有输出，交易记录会显示新生成的比特币（Newly Generated Coins），除矿工产出交易外，一个输入必然是另一笔交易的一个输出，也就是一笔收入必然是其他人的支付。

一个输入没有成为另一笔交易的输出时，它是“未花费的”，也就是“账户余额”。

收录此交易的区块被广播后，此交易就有了“1个确认”。矿工们平均每10分钟产生一个区块，每一个新区块的诞生会使此交易的确认数加1。当确认数达到6时，通常这笔交易被认为比较安全、难以逆转。

比特币交易为不可逆，每一笔交易都无法撤销，商家不必遭到诈骗式的拒付而遭受损失，唯一可以获得退款的方法，就是请对方再做一笔反向交易，但需要对方的配合。

# 比特币分布

比特币的所有交易都会被记录在区块链上，比特币最多的地址可以很轻易的在网络上公开查询。

这些地址多半是交易所的冷钱包，但作为匿名的比特币地址，原则上无法得知持有者，除非特别情况，通常也无法得知某人拥有的比特币地址，每个人都可以创建及拥有许多的比特币地址，而不同地址也可由同一人或机构持有，包括有些余额很少的地址，且不代表持有者的真实财富状况，而该地址的私钥若丢失，里面的比特币就不能使用，因此某些地址的比特币，特别是只进不出、或长期未花用的地址，可能是私钥已丢失、而任何人皆无法再使用的地址。

有数个比特币位置存有未使用的大量资金。

其中部分地址曾存有美国联邦调查局自在线黑市“丝路”创办人“恐怖海盗罗伯特”（Dread Pirate Roberts）处查扣的比特币资金，这些地址已在2013年10月被美国司法部强制下线。

# 安全性

比特币结合P2P对等网络技术和密码学原理，来维持发行系统的安全可靠性。

与有中心服务器的中央网络系统不同，在P2P网络中无中心服务器，每个用户端既是一个节点，也有服务器的功能，任何一个节点都无法直接找到其他节点，必须依靠其户群进行信息交流。比特币使用以下3种机制，来解决初次运行时，查找其他节点的问题。

1. 在默认情况下，运行比特币的用户端加入一个IRC聊天通道，并可以获知加入该通道的其他用户端的IP地址和端口。该通道的名称和IRC聊天服务器的名称被写在了比特币软件中。

2. 一些“知名的”比特币节点也被编写在软件中，以防IRC聊天服务功能因故无法访问。

3. 可以手动添加运行比特币的其他用户端的IP地址。

现在不需要运行上述3个机制，一旦连接到比特币的某个节点，在发送的信息中，就会包含对等网络P2P其他节点的地址，直接通过其匿名用户群来找到其他节点。节点遍布整个互联网的P2P技术和密码学原理相结合，确保了比特币发行系统无法被政府、组织、或黑客监控、隔离、或破坏，从而保障了系统的可靠性和匿名性。

拒绝服务式（DDoS）以及其他攻击，其目标都是针对比特币交易中心，这和攻击或关闭传统货币交易所的网络，理论上不影响其货币发行和使用一样。

2013年5月，美国政府查封世界上最大的比特币交易所银行账户后，兑换率还是维持在1比特币兑换120美元上下。

## 匿名与隐私保护

匿名与隐私是比特币问世时主要的诉求，因为交易或创建比特币地址、钱包时，不需要提供任何个人信息，区块链也不会存储任何个人信息，但交易信息是向全网广播的，因此所有交易记录细节都是公开的、而可以追踪。

不同于采用KYC认证的传统金融机构，通过将交易信息与客户资料严格保密来保护客户隐私，但若国家机关基于特定原因，而向金融机构调取资料，或是被金融机构被黑客攻击，或是内部泄漏，这样仍然会使隐私消失，而使得特定交易信息与关系的客户资料曝光，相对的，由于比特币的交易纪录可以追踪，因此如果比特币的特定交易信息与关系的客户资料曝光，或经由KYC认证的交易所兑换成法定货币，其他相关地址也可能追踪出真实身份，比特币可通过为每笔交易创建不同的地址来保护隐私，bitcoin.org网站也建议每一个地址只做一次交易。

例如，甲方希望发送1.20 BTC给乙方，那么任何人都可以通过比特币网络上所有节点都能够查阅这笔1.20 BTC的交易细节。但除非甲方或者乙方公布自己拥有其中的一个地址，否则作为不记名的货币，其他人很难知道这笔交易是发生在甲方与乙方之间的。

理论上，如果有调查者能够将某一个地址与某一用户间创建关联，那么调查者就可以追根溯源，搞清楚每一笔交易的对方，如比对其它的个人信息，如交易的IP地址等，某特定交易的信息，要求已知的一方交代交易的另一方的身份等，并顺藤摸瓜经由交易链，并配合比特币交易所基于反洗钱法的KYC身份认证，直到确定目标地址的真实所有者，因此，只要有一笔交易被证明为犯罪，如某些交易是绑架的赎金或是未经持有人同意下，从被盗的账户转账出去等，之后所有后续转出去的地址都会被"污染"。

但实际上，想要确定某个比特币的真实所有者依然是异常困难的，加上后续混合比特币(Bitcoin Mixing)、匿名转换成其他加密货币，特别是门罗币等彻底隐藏交易信息的新类型加密货币的产生，虽然强化了隐私保护，但也增加金流追踪的困难，这一属性使得比特币吸引了很多非法物品交易者的兴趣。

为求彻底解决比特币有关隐私性、被监控、被追踪等疑虑，后续开发了强调隐私，有自动混币或加密功能的区块链与替代加密货币，通称隐私币，包括达世币、门罗币、Zcash、PIVX等，但由于这类货币极容易被当成洗钱工具，因此在一部分交易所的交易会受到限制。

# 流通性与接受度

比特币仍然有合法或正当的用途。

有多种途径使用比特币，通过电子货币交易所、比特币提款机、服务商和个人等渠道，就能兑换为当地的现金或金币或以现金或金币购买比特币；也可以直接使用它购买物品和服务，或使用比特币金融卡。

特别继维基解密宣布接受比特币捐助后，认可使用比特币的个人、组织和企业迅猛增长。

Coinmap（页面存档备份，存于互联网档案馆）是一个专门收录全球范围内接受比特币支付的实体商家网站，比特币维基有一个网页则列出了接受比特币支付的合法网络商家。

随着比特币金融卡的激活，即使商家不接受比特币，仍然可以依照比特币与法币的即时汇率，而以比特币付款，犹如刷人民币账户的金融卡支付外币（美元、欧元等）消费，仍然可以依照该外币与人民币的即时汇率，而从人民币的存款账户扣款来完成付款，这样商家只要支持Visa 或 Mastercard等信用卡，或是Apple Pay等移动支付功能者皆能使用，使用范围就能从直接接受比特币的1万商家，大幅扩大到包括网络购物、卖场购物、餐厅和咖啡厅用餐、搭乘交通工具、加油站加油等数千万个商家（Visa 2,900万、MasterCard 3,200万个），如果许可，并可使用世界各地逾3千多万台一般法币ATM，以比特币提领当地现金使用。

# 比特币现金

比特币现金（英语：Bitcoin Cash，货币符号为BCH）是加密货币比特币因比特币扩展性问题在Block 478558（2017年8月1日）进行的一个硬分叉（hard fork）。

## 历史

比特币现金的区块大小为8MB，而比特币的区块的大小则于同一日决定从1MB于六个月内增加到2MB。

比特币现金的计划由中国比特币挖矿机公司比特大陆（Bitmain）最先提出。

## 争议

部分人认为，比特币现金的设计使其较接近企业机构中心化，因为数据量变大, 使得个人电脑无法处理其计算量，与比特币去中心化个人私有的原旨不同，所以分叉出来成为独立的数位投资产品，比较没有货币的属性。

而另有部分人认为，唯BCH的扩容是最好办法，SegWit并不能担此大任。一方面，SegWit反而降低了计算下一区块的矿工的挖矿效率（需要额外的查询时间）而导致矿工弃之而选择性价比更高的非SegWit交易；

另一方面，因为交易信息依然需要写入区块链，启用SegWit后并不能根本上解决区块过小导致的交易堵塞。

另外，这部分人认为bitcoin core之后为比特币添加的SegWit并非比特币设计者中本聪的本愿，它把原先一整条区块链拆分为主链和签名认证链，而这样的比特币的血统并不纯正[4]也不安全。

## 贸易和使用

比特币现金（Bitcoin Cash）在数字货币交易所交易，使用比特币现金的名称和加密货币的BCH货币符号。

2018年3月26日，由于 «流动性不足»，OKEx除了BCH/BTC，BCH/ETH和BCH/USDT以外的删除了所有比特币现金种。

截至2018年5月，比特币现金的每日交易量约为比特币的十分之一。

CoinBase于2017年12月19日把比特币现金（Bitcoin Cash）上市了，CoinBase平台面临价格偏差，导致内部交易调查。

截至2018年8月，比特币现金由BitPay，Coinify和GoCoin等支付服务提供商提供支持。

## 硬分叉

2017年11月13日，比特币现金迎来硬分叉，分为比特币现金原链（BCC），新链（BCH）。在分叉接近2年后，BCC在2019年7月份有大量矿工投入挖掘该链条，完全复活。

2018年11月15日，比特币现金迎来硬分叉，分为BCHABC（BCH），BCHSV（BSV）。

硬分叉主因比特币现金自从面世以来，矿工之间一直争论是否回复至原来比特币之模式。结果，BCHABC维持比特币现金之设计，而BCHSV则转回原来比特币之设计。

分叉以后，BCHABC与BCHSV之间争夺算力。

双方被指进行恶性竞争，一直未能回本而继续挖矿，以消灭其他分叉。

# 参考资料

https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B8%81

https://zh.wikipedia.org/wiki/%E6%AF%94%E7%89%B9%E5%B9%A3%E7%8F%BE%E9%87%91

* any list
{:toc}