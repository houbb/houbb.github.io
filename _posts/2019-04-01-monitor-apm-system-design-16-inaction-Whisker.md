---
layout: post
title: 监控报警系统-16-报警规则配置之 Whisker线（箱线图）（Box and Whisker Plot） 箱体（Box）和触须线（Whiskers）
date:  2021-06-20 16:52:15 +0800
categories: [APM]
tags: [apm, system-design, alarm-center]
published: true
---


# 前言

一般而言，我们希望监控可以指标，比如交易的成功率。

```
成功率 = (成功数 / 交易总数) * 100%
```

然后配置阈值 成功率 < 80%，我们就报警。

但实际可能会存在问题，比如交易数过低问题、或者某些时间段就是特别低，一直如此。

经常性的问题，我们就不认为这个有问题。

有没有什么好的方法，可以解决这个问题？

有的：

```
预期成功率 = 成功率 / 模型预期成功率
```

这里的模型可以是一个简单的 触须线（Whiskers）。

# chat

## 监控中的Whisker线详解

一、数据监控中的Whisker线（箱线图）

### 监控中的Whisker线详解

#### 一、数据监控中的Whisker线（箱线图）

箱线图（Box and Whisker Plot）是一种用于数据分布可视化和异常值检测的统计工具，其核心组成部分包括箱体（Box）和触须线（Whiskers）。

在监控场景中，Whisker线通过定义数据范围边界，帮助识别异常值并分析数据分布特征。

##### 1. **定义与结构**
- **箱体**：由第一四分位数（Q1）到第三四分位数（Q3）构成，箱体内部的中线表示中位数（Q2），反映数据的集中趋势。
- **Whisker线**：从箱体两端延伸至最小值和最大值，通常定义为：
  - 上限：Q3 + 1.5×IQR（四分位距，即Q3-Q1）
  - 下限：Q1 - 1.5×IQR。
- **异常值**：超出Whisker范围的数据点被视为异常值，需单独标记。

##### 2. **应用场景与优势**
- **工业过程监控**：例如在烧结矿FeO含量预测中，箱线图用于剔除异常数据，提升模型准确性。
- **科研数据分析**：通过Whisker线快速识别实验数据中的极端值，减少噪声干扰。
- **商业决策支持**：在用户行为分析中，Whisker线可帮助发现异常交易或流量波动。

##### 3. **动态调整与局限性**
- **动态范围**：某些场景下，Whisker线可能基于2倍标准差或其他阈值定义，需根据具体需求调整。
- **局限性**：对非对称分布的数据，Whisker线可能无法完全反映尾部特征，需结合密度图使用。

---

#### 二、物理监控中的Whisker传感器
Whisker传感器是一种仿生触觉装置，模拟动物胡须的机械感知能力，广泛应用于机器人、水下探测和工业自动化等领域。

##### 1. **工作原理与技术实现**
- **机械形变检测**：当Whisker接触物体时，其根部产生弯曲形变，通过应变片、压电材料或光学传感器转换为电信号。
- **信号处理**：
  - **单比特型**：仅检测接触状态（ON/OFF），适用于低成本障碍物避让。
  - **模拟型**：测量形变量以估算接触距离和方向，需结合霍尔效应或摩擦电技术实现高精度。
- **材料选择**：常用弹性合金（如TiNi形状记忆合金）或碳纤维增强复合材料，兼具灵敏度和耐久性。

##### 2. **典型应用案例**
- **机器人导航**：移动机器人通过Whisker阵列感知障碍物位置，动态调整路径。
- **水下探测**：仿海豹胡须传感器检测水流扰动，用于自主水下航行器（AUV）的导航与目标追踪。
- **工业质检**：旋转式Whisker传感器扫描表面缺陷，结合机器学习算法实现高精度异常检测。

##### 3. **技术挑战与创新**
- **多模态感知**：通过集成多个Whisker传感器和视觉/听觉模块，提升环境感知的鲁棒性。
- **微型化设计**：采用3D打印和MEMS技术，减少传感器体积并提高集成度。
- **自供能技术**：摩擦纳米发电机（TENG）可将机械能转化为电能，实现无源传感。

---

#### 三、Whisker在不同监控场景中的对比分析

| **维度**       | **箱线图Whisker线**                          | **Whisker传感器**                          |
|----------------|---------------------------------------------|-------------------------------------------|
| **核心功能**    | 数据分布可视化与异常值检测                     | 物理环境感知与接触检测                     |
| **适用场景**    | 数据分析、工业过程监控、科研                   | 机器人、水下探测、工业自动化               |
| **精度**        | 依赖统计阈值，受数据分布影响                   | 微米级形变检测，部分型号支持多维力反馈 |
| **成本**        | 低（软件工具实现）                             | 中高（材料与制造工艺复杂）           |
| **实时性**      | 延迟较高（需批量数据处理）                     | 毫秒级响应，支持动态交互       |
| **环境适应性**  | 仅限数字环境                                  | 耐水下高压、极端温度及电磁干扰 |

---

#### 四、未来发展趋势
1. **智能化融合**：箱线图Whisker线将与机器学习结合，实现动态阈值优化；Whisker传感器则通过边缘计算提升实时决策能力。
2. **跨领域协同**：例如在智能工厂中，箱线图监控生产数据异常，同时Whisker传感器检测设备物理状态，形成闭环质量控制。
3. **仿生学突破**：基于海豹胡须的流体动力学特性，开发下一代水下Whisker传感器，提升远距离目标追踪能力。

---

#### 五、总结

监控中的Whisker线涵盖数据科学与物理传感两大领域：在数据分析中，箱线图的Whisker线是异常检测的核心工具；

在物理监控中，Whisker传感器通过仿生设计实现高精度环境感知。

两者共同推动着工业自动化、机器人技术和智能系统的进步，未来在智能化与跨学科融合中将发挥更关键的作用。






# 参考资料




* any list
{:toc}
