---
layout: post
title: RDS
date: 2018-12-24 19:39:35 +0800
categories: [SQL]
tags: [sql, cloud, sh]
published: true
excerpt: 云上 mysql RDS
---

# RDS

阿里云数据库RDS版包含有MySQL、SQL Server、PostgreSQL、PPAS和MariaDB TX，用户可以在几分钟内创建出适合自己应用场景的数据库实例，迅速投产，按需付费。本文我们将以MySQL版示例，点几下鼠标即可生成业务所需的数据库。

开始动手实践之前我们先介绍一下阿里云数据库RDS for MySQL版的几个基本共识，以便于更准确选择到适用于您业务场景的MySQL配置。

## 1、选版本

阿里云上的MySQL提供基础版、高可用版和金融版三种版本：

基础版一般就是用于个人学习、或开发测试时使用。目前基础版只提供MySQL 5.7版本，采用单节点部署，性价比非常高。基础版采用计算节点与存储分离的实现方式，也就是说假如计算节点宕机，MySQL就不可用了，但数据都存在云盘里面不会丢，数据一致性还是可以得到保证，不用担心数据丢失。因为基础版的最大问题是可用性不高，适用于相对不重要的场景，所以不建议您在生产环境中使用基础版。

高可用版顾名思义，为应用提供了数据库的高可用保障，也就是说至少要用双节点。RDS MySQL高可用版采用一主一备的经典高可用架构，采用基于binlog的数据复制技术维护数据库的可用性和数据一致性。同时，高可用版的性能也可以满足业务生产环境的需求，配置上采用物理服务器和本地SSD硬盘，提供最佳性能，各方面表现均衡。

最高级的是金融版，针对金融、证券、保险等行业的核心数据库，他们对数据安全性、可用性要求非常高。金融版采用三节点，实现一主两备的部署架构，通过binlog日志多副本多级别复制，确保数据的强一致性，可提供金融级的数据可靠性和跨机房容灾能力。

![sql-select](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/67687/cn_zh/1519979487229/1.png)

## 2、选规格

阿里云上MySQL有三种规格类型：通用型、独享型和独占型。

通用型和独享型都是在一台物理服务器上划分多个资源隔离的区域，为不同用户提供MySQL数据库实例。他们的不同点在于，通用型对于CPU和存储空间采用了复用的技术。当部署在同一台服务器上的所有MySQL实例都很繁忙的情况下，有可能会出现实例间的CPU争抢，或存储的争抢；而独享型虽然也是多个数据库实例共享一台物理服务器，但资源隔离策略确保每个实例都可以独享所分配到的CPU、内存、I/O、存储，不会出现多个实例发生资源争抢的情况。

最高级别的是独占型，是指一个MySQL实例独占一台服务器，会获得最好的性能，当然价格也最贵。追求极致性能但对价格不敏感的客户一般会在重要业务系统采用独占型实例。

![select-type](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/67687/cn_zh/1519979697122/2.png)


## 3、选地域和可用区

阿里云在国内外多个地域部署了数据中心，并提供多线BGP骨干网线路接入。请根据您以及目标用户所在的地理位置选择地域，从而提升用户访问速度。一般情况下RDS应该和ECS服务器选择在同一地域，这样您部署于ECS服务器中的应用和数据库之间的网络连接效率是最高的。可用区是指在同一地域内，拥有独立电力和网络的物理区域，实现故障隔离。在同一地域内多个可用区采用高速链路互通，您可以选择将RDS与应用软件的ECS创建在同一可用区或不同的可用区，因为同一地域的不同可用区之间没有实质性区别。同时，MySQL在特定地域提供了多可用区部署的选择，也就是说，高可用版的主节点和备节点分别位于不同的可用区，从而提供跨可用区的容灾高可用能力。

## 4、应用上云

现有业务系统的数据库有可能跑在自己的机房、托管的IDC、VMware虚拟机、OpenStack私有云、或在阿里云ECS云服务器上。阿里云数据传输服务DTS（Data Transmission Service）提供了多种数据迁移方案，可满足不同上云或迁云的业务需求，使您可以在不影响业务的情况下将数据库平滑迁移至云数据库RDS上面。您可以实现MySQL数据库的结构迁移、全量迁移和增量迁移。另外，您也不用担心被云锁定，无法从阿里云迁回本地。RDS支持通过物理备份或逻辑备份的方式，将云上数据迁移到本地数据库。

![sql-cloud](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/67687/cn_zh/1519979907204/6.png)

# 与 mysql 的关系

使用起来和 mysql 一样

# 参考资料

[十分钟了解云数据库RDS](https://help.aliyun.com/document_detail/67687.html)

* any list
{:toc}