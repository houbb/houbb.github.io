---
layout: post
title:  äºŒåˆ†æŸ¥æ‰¾æ³•ï¼Ÿbinary-search-02-leetcode 033. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ search-in-rotated-sorted-array
date:  2020-6-8 15:13:08 +0800
categories: [Algorithm]
tags: [algorithm, data-struct, topics, leetcode, binary-search, sf]
published: true
---


# äºŒåˆ†æŸ¥æ‰¾ç®—æ³•

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€é©¬ã€‚

ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹æ•°ç»„å¯†åˆ‡ç›¸å…³çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åŠ›æ‰£å®æˆ˜ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹äºŒåˆ†æ³•å½“æ•°ç»„ä¸å†ä¸¥æ ¼é€’å¢ï¼Œä½†ä»ä¿æœ‰ä¸€å®šè§„å¾‹ï¼Œå¯ä»¥é€šè¿‡**äºŒåˆ†å®šä½åŒºé—´**

# 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„

æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 <= k < nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚

ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚

ç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1 ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚


ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4

ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1

ç¤ºä¾‹ 3ï¼š

è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
 

æç¤ºï¼š

1 <= nums.length <= 5000
-104 <= nums[i] <= 10^4
nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ
é¢˜ç›®æ•°æ®ä¿è¯ nums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ä¸Šè¿›è¡Œäº†æ—‹è½¬
-10^4 <= target <= 10^4

# v1-æš´åŠ›å¾ªç¯

## æ€è·¯

æœ€æœ´ç´ çš„æš´åŠ›å¾ªç¯çš„æ–¹å¼

æˆ‘ä»¬é¦–å…ˆæƒ³åŠæ³•ï¼Œç¡®å®šä¸Šä¸‹é™ã€‚

ç›´æ¥ä»å¼€å§‹åˆ°ç»“æŸæ¥ä¸€é

## è§£æ³•

```java
public int search(int[] nums, int target) {
    for(int i = 0; i < nums.length; i++) {
        if(target == nums[i]) {
            return i;
        }
    }
    return -1;
}
```


## æ•ˆæœ

0ms å‡»è´¥ 100.00%

è¿™ä¸€é¢˜çš„æµ‹è¯•ç”¨ä¾‹æœ‰é—®é¢˜ï¼Œæ²¡æœ‰åŒºåˆ†åº¦ã€‚

# v2-äºŒåˆ†æ³•è¿­ä»£

## æ€è·¯

æˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ°è¿™ä¸ªè¢«éšæœºåè½¬çš„ç‚¹

æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯æ•°å­—ä¼šå¿½ç„¶å˜å°ï¼Œåé¢çš„å°äºå‰é¢çš„ï¼Œæ‰¾åˆ°è¿™ä¸ª index ï¼Œç„¶åå°†æ•°ç»„åˆ†ä¸º2ä¸ªéƒ¨åˆ†å³å¯ã€‚

å› ä¸ºåˆ†æˆä¸¤åŠä¹‹åï¼Œä¸¤ä¸ªéƒ¨åˆ†ä¾ç„¶æ˜¯é¡ºåºçš„ã€‚

## è§£æ³•

```java
    public int search(int[] nums, int target) {
        int randomIndex = getRandomIndex(nums);
        // æ— å˜åŒ–ï¼Œæˆ–è€…æ•´ä½“å˜åŒ–
        if(randomIndex == -1) {
            return binarySearch(nums, target, 0, nums.length-1);
        }

        // å·¦è¾¹
        int leftIx = binarySearch(nums, target, 0, randomIndex);
        if(leftIx >= 0) {
            return leftIx;
        }

        // å³è¾¹
        int rightIx = binarySearch(nums, target, randomIndex+1, nums.length-1);
        if(rightIx >= 0) {
            return rightIx;
        }

        return -1;
    }

    private int binarySearch(int[] nums, int target, int left, int right) {
        while (left <= right) {
            int mid = left + (right - left);

            int midVal = nums[mid];
            if(midVal == target) {
                return mid;
            }

            // å¤§äºï¼Œå»å·¦è¾¹
            if(midVal > target) {
                right = mid-1;
            } else {
                left = mid+1;
            }

        }

        return -1;
    }

    private int getRandomIndex(int[] nums) {
        for(int i = 0; i < nums.length-1; i++) {
            if(nums[i] > nums[i+1]) {
                return i;
            }
        }
        // æ²¡æœ‰å˜åŒ–
        return -1;
    }
```

## æ•ˆæœ

0ms å‡»è´¥ 100.00%

## ä¸€ç‚¹è¡¥å……

çœ‹åˆ°è¿™ä¸ªï¼Œå¿½ç„¶æƒ³åˆ°äº† 852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•

å½“ç„¶ï¼Œè¿™ä¸ªè½¬æ¢å¯èƒ½ä¸å­˜åœ¨é¡¶ç‚¹çš„åœºæ™¯ã€‚

# v3-æ—‹è½¬ç‚¹çš„äºŒåˆ†æ³•å¯»æ‰¾

## æ€è·¯

åŸæ¥æ˜¯ for å¾ªç¯éå†æ•°ç»„ï¼ŒæŸ¥æ‰¾æ–­ç‚¹ï¼›

ç°åœ¨æ”¹ä¸ºäºŒåˆ†æŸ¥æ‰¾æ–¹å¼ï¼š

æ¯æ¬¡åˆ¤æ–­ `nums[mid] > nums[mid + 1]`ï¼Œå¦‚æœæ˜¯ï¼Œå°±æ‰¾åˆ°äº†æ—‹è½¬ç‚¹ï¼›

å¦åˆ™åˆ¤æ–­æ˜¯å¾€å·¦è¾¹ç¼©å°èŒƒå›´è¿˜æ˜¯å³è¾¹ç¼©å°ã€‚

## è§£æ³•

```java
private int search(int[] nums) {
    int left = 0, right = nums.length - 1;
    // æ²¡æœ‰æ—‹è½¬
    if (nums[left] <= nums[right]) {
        return -1;
    }

    while (left <= right) {
        int mid = left + (right - left) / 2;
        // æ‰¾åˆ°æ–­ç‚¹ ä¸ç¬¦åˆä¸¥æ ¼å‡åº
        // nums = [4,5,6,7,0,1,2]
        if (nums[mid] > nums[mid + 1]) {
            return mid;
        }
        // å·¦è¾¹æ˜¯æœ‰åºçš„ï¼Œè¯´æ˜æ–­ç‚¹åœ¨å³è¾¹
        if (nums[mid] >= nums[left]) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return -1;
}
```

è¿™ç§æ€è·¯å…¶å®æ›´åŠ è‡ªç„¶ã€‚

æ€§èƒ½æ•´ä½“å¼æœ€å¤š3æ¬¡ O(logn)ï¼Œä¹Ÿç®—æ˜¯æ»¡è¶³éœ€æ±‚

# v4-ä¸€æ¬¡äºŒåˆ†

## æ€è·¯

å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–è¿™ä¸ªè§£æ³•ã€‚

æ„Ÿè§‰è¿™ä¸ªæŠ€å·§æ€§æ¯”è¾ƒå¼ºï¼Œå®¹æ˜“å‡ºé”™ã€‚

1. **é€šè¿‡äºŒåˆ†æ³•ä¸æ–­ç¼©å°èŒƒå›´**å‰ææ˜¯æ•°ç»„æœ‰åºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°æœ‰åºçš„éƒ¨åˆ†ã€‚å› ä¸ºè¢«åˆ†æˆ2ä¸ªéƒ¨åˆ†ï¼Œæ‰€ä»¥è‚¯å®šä¸€åŠæ˜¯æœ‰é¡ºåºçš„ã€‚
2. åˆ¤æ–­å½“å‰çš„ `nums[mid]` è½åœ¨ **å“ªä¸€è¾¹çš„æœ‰åºåŒºé—´**ï¼›
3. åˆ©ç”¨æœ‰åºåŒºé—´æ¥åˆ¤æ–­ target åº”è¯¥å¾€å·¦è¿˜æ˜¯å¾€å³ã€‚

## å®ç°

ä»£ç ä¸é•¿ï¼Œè¡Œè¡Œè‡´å‘½ã€‚

```java
    public int search(int[] nums, int target) {
        int left = 0;
        int right = nums.length-1;

        while (left <= right) {
            int mid = left + (right-left) / 2;
            if(nums[mid] == target) {
                return mid;
            }

            // åˆ¤æ–­å·¦å³ä¸¤ä¾§é‚£è¾¹æœ‰é¡ºåº å€¼äº’ä¸ç›¸åŒï¼Œéœ€è¦åˆ¤æ–­ç­‰äºå—ï¼Ÿ
            // æœ¬æ¬¡åˆ†å‰²ï¼Œå·¦ä¾§æœ‰åº
            if(nums[left] <= nums[mid]) {
                // åˆ¤æ–­å½“å‰çš„æ•°æ˜¯å¦åœ¨ [left, mid) ä¸­ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¯´æ˜ target åœ¨è¿™ä¸€åŠçš„å·¦ä¾§
                if(nums[left] <= target && target < nums[mid]) {
                    right = mid-1;
                } else {
                    left = mid+1;
                }
            } else {
                // å³ä¾§æœ‰é¡ºåº
                // å¦‚æœ target ä½äº (mid, target] ä¸­ï¼Œåˆ™è¯´æ˜ target åœ¨è¿™ä¸€åŠçš„å³ä¾§
                if(nums[mid] < target && target <= nums[right]) {
                    left = mid+1;
                } else {
                    right = mid-1;
                }
            }
        }

        return -1;
    }

```

## ä¸¾ä¸ªä¾‹å­

å…¶å®è¿™ä¸ªè¿˜æ˜¯å¾ˆéš¾æ‡‚ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚

ğŸ“Œ é¢˜è®¾å‰æ

æ•°ç»„æ˜¯**ä»ä¸€ä¸ªå‡åºæ•°ç»„ä¸­æ—‹è½¬å¾—åˆ°**çš„ã€‚

ä¾‹å¦‚ï¼š

```java
åŸå§‹å‡åº:     [0, 1, 2, 4, 5, 6, 7]
æ—‹è½¬åçš„æ•°ç»„: [4, 5, 6, 7, 0, 1, 2]
```

ğŸ¯ç›®æ ‡

æˆ‘ä»¬è¦åœ¨è¿™ä¸ª**è¢«æ—‹è½¬çš„æ•°ç»„**ä¸­æŸ¥æ‰¾æŸä¸ª `target`ï¼Œ**ä¸èƒ½é¢å¤–å¤„ç†æ—‹è½¬ç‚¹**ï¼Œåªèƒ½ç”¨**ä¸€æ¬¡äºŒåˆ†**æå®šã€‚

ğŸ‘€ æ•´ä½“ç­–ç•¥å›é¡¾

åœ¨æ¯è½®äºŒåˆ†ä¸­ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª `mid`ã€‚

æ­¤æ—¶ï¼š

```java
nums = [..., ..., ..., ..., ..., ...]
         â†‘         â†‘         â†‘
       left       mid       right
```

æ•°ç»„æ˜¯éƒ¨åˆ†æœ‰åºçš„ï¼Œä½†ä¸æ˜¯æ•´ä½“æœ‰åºã€‚é‚£æ€ä¹ˆåŠï¼Ÿ

æˆ‘ä»¬å‘ç°ï¼š**å·¦åŠè¾¹æˆ–è€…å³åŠè¾¹ä¸€å®šæ˜¯æœ‰åºçš„**ï¼

ğŸ” è¯¦ç»†è§£é‡Šï¼šä¸ºä»€ä¹ˆåˆ¤æ–­ `nums[left] <= nums[mid]` è¡¨ç¤ºå·¦åŠè¾¹æ˜¯æœ‰åºçš„ï¼Ÿ

å‡è®¾æ•°ç»„æ˜¯è¿™æ ·è¢«æ—‹è½¬çš„ï¼š

```java
[4, 5, 6, 7, 0, 1, 2]
```

* å¦‚æœ `mid` è½åœ¨ `4~7` çš„éƒ¨åˆ†ï¼ˆæ—‹è½¬å‰çš„å·¦è¾¹ï¼‰ï¼Œé‚£è¿™ä¸€æ®µæ˜¯å‡åºçš„ã€‚
* `nums[left] <= nums[mid]` å°±è¯´æ˜ **`left~mid` æ˜¯æœ‰åºçš„**ã€‚

è€Œå¦‚æœï¼š

```java
nums = [6, 7, 0, 1, 2, 3, 4]
               â†‘
             mid
```

* é‚£ä¹ˆ `nums[left] > nums[mid]`ï¼Œè¯´æ˜å·¦è¾¹ä¸æ˜¯å‡åºçš„ã€‚

æ‰€ä»¥è¿™å¥åˆ¤æ–­çš„å«ä¹‰å°±æ˜¯ï¼š

```java
if (nums[left] <= nums[mid]) {
    // å·¦è¾¹ [left, mid] æ˜¯å‡åºçš„
}
```

ğŸ§  æ¥ä¸‹æ¥çœ‹é‡Œé¢è¿™æ®µï¼š

```java
if (nums[left] <= target && target < nums[mid]) {
    right = mid - 1;
} else {
    left = mid + 1;
}
```

ğŸš©ç›®æ ‡ï¼šåˆ¤æ–­ target æ˜¯ä¸æ˜¯åœ¨è¿™ä¸ª**æœ‰åºçš„å·¦åŠæ®µ**ä¸­

ä½ ç°åœ¨çŸ¥é“ `[left ~ mid]` æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆï¼š

* å¦‚æœ target **è½åœ¨è¿™ä¸ªåŒºé—´**ï¼ˆ`nums[left] <= target < nums[mid]`ï¼‰ï¼š
  ğŸ‘‰ é‚£å°±ç»§ç»­å¾€å·¦è¾¹æœ â†’ `right = mid - 1`

* å¦åˆ™ï¼Œtarget ä¸åœ¨ `[left~mid]`ï¼Œé‚£åªèƒ½åœ¨å³è¾¹ â†’ `left = mid + 1`


# è¡¥å……-å¯è§†åŒ–æ•ˆæœ

> [å¯è§†åŒ–æ•ˆæœ](https://houbb.github.io/leetcode-visual/T875-binary-search-eat-banana.html)

# é¡¹ç›®å¼€æº

> [æŠ€æœ¯åšå®¢](https://houbb.github.io/)

> [leetcode-visual èµ„æºå¯è§†åŒ–](https://github.com/houbb/leetcode-visual)

> [leetcode ç®—æ³•å®ç°](https://github.com/houbb/leetcode)

# å°ç»“

å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¦‚æœæœ‰å…¶ä»–æƒ³æ³•çš„è¯ï¼Œä¹Ÿå¯ä»¥è¯„è®ºåŒºå’Œå¤§å®¶åˆ†äº«å“¦ã€‚

å„ä½æå®¢çš„ç‚¹èµæ”¶è—è½¬å‘ï¼Œæ˜¯è€é©¬æŒç»­å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼

ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†è®²è§£äºŒåˆ†çš„å®æˆ˜é¢˜ç›®ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€æ³¢ï¼Œç²¾å½©å†…å®¹ï¼Œä¸å®¹é”™è¿‡ã€‚

# å‚è€ƒèµ„æ–™

https://leetcode.cn/problems/binary-search/description/

* any list
{:toc}
