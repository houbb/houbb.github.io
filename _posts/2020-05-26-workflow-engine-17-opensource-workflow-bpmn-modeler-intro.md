---
layout: post
title: å·¥ä½œæµå¼•æ“-17-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ flowable workflow designer based on vue and bpmn.io
date:  2020-5-26 16:05:35 +0800
categories: [Engine]
tags: [engine, workflow-engine, workflow, bpm, flow]
published: true
---


## å·¥ä½œæµå¼•æ“ç³»åˆ—

[å·¥ä½œæµå¼•æ“-00-æµç¨‹å¼•æ“æ¦‚è§ˆ](https://houbb.github.io/2020/05/26/workflow-engine-00-overview)

[å·¥ä½œæµå¼•æ“-01-Activiti æ˜¯é¢†å…ˆçš„è½»é‡çº§ã€ä»¥ Java ä¸ºä¸­å¿ƒçš„å¼€æº BPMN å¼•æ“ï¼Œæ”¯æŒç°å®ä¸–ç•Œçš„æµç¨‹è‡ªåŠ¨åŒ–éœ€æ±‚](https://houbb.github.io/2020/05/26/workflow-engine-01-activiti)

[å·¥ä½œæµå¼•æ“-02-BPM OA ERP åŒºåˆ«å’Œè”ç³»](https://houbb.github.io/2020/05/26/workflow-engine-02-bpm-oa-erp)

[å·¥ä½œæµå¼•æ“-03-èŠä¸€èŠæµç¨‹å¼•æ“](https://houbb.github.io/2020/05/26/workflow-engine-03-chat-what-is-flow)

[å·¥ä½œæµå¼•æ“-04-æµç¨‹å¼•æ“ activiti ä¼˜ç§€å¼€æºé¡¹ç›®](https://houbb.github.io/2020/05/26/workflow-engine-04-activiti-opensource)

[å·¥ä½œæµå¼•æ“-05-æµç¨‹å¼•æ“ Camunda 8 åè°ƒè·¨äººã€ç³»ç»Ÿå’Œè®¾å¤‡çš„å¤æ‚ä¸šåŠ¡æµç¨‹](https://houbb.github.io/2020/05/26/workflow-engine-05-camunda-intro)

[å·¥ä½œæµå¼•æ“-06-æµç¨‹å¼•æ“ Flowableã€Activiti ä¸ Camunda å…¨ç»´åº¦å¯¹æ¯”åˆ†æ](https://houbb.github.io/2020/05/26/workflow-engine-06-compare)

[å·¥ä½œæµå¼•æ“-07-æµç¨‹å¼•æ“ flowable-engine å…¥é—¨ä»‹ç»](https://houbb.github.io/2020/05/26/workflow-engine-07-flowable-intro)

[å·¥ä½œæµå¼•æ“-08-æµç¨‹å¼•æ“ flowable-engine ä¼˜ç§€å¼€æºé¡¹ç›®](https://houbb.github.io/2020/05/26/workflow-engine-08-flowable-opensource)

[å·¥ä½œæµå¼•æ“-09-XState æ˜¯ä¸€ä¸ª JavaScript å’Œ TypeScript çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä½¿ç”¨çŠ¶æ€æœºå’ŒçŠ¶æ€å›¾æ¥å»ºæ¨¡é€»è¾‘](https://houbb.github.io/2020/05/26/workflow-engine-09-xstate-intro)

[å·¥ä½œæµå¼•æ“-10-ä»€ä¹ˆæ˜¯ BPM?](https://houbb.github.io/2020/05/26/workflow-engine-10-bpm-intro)

[å·¥ä½œæµå¼•æ“-11-å¼€æº BPM é¡¹ç›® jbpm](https://houbb.github.io/2020/05/26/workflow-engine-11-opensource-bpm-jbpm-intro)

[å·¥ä½œæµå¼•æ“-12-å¼€æº BPM é¡¹ç›® foxbpm](https://houbb.github.io/2020/05/26/workflow-engine-12-opensource-bpm-foxbpm-intro)

[å·¥ä½œæµå¼•æ“-13-å¼€æº BPM é¡¹ç›® UFLO2](https://houbb.github.io/2020/05/26/workflow-engine-13-opensource-bpm-uflo-intro)

[å·¥ä½œæµå¼•æ“-14-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ RuoYi-vue + flowable 6.7.2 çš„å·¥ä½œæµç®¡ç†](https://houbb.github.io/2020/05/26/workflow-engine-14-opensource-ruoyi-flowable-intro)

[å·¥ä½œæµå¼•æ“-15-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ RuoYi-Vue-Plus è¿›è¡ŒäºŒæ¬¡å¼€å‘æ‰©å±•Flowableå·¥ä½œæµåŠŸèƒ½](https://houbb.github.io/2020/05/26/workflow-engine-15-opensource-ruoyi-flowable-plus-intro)

[å·¥ä½œæµå¼•æ“-16-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ æ•´åˆFlowableå®˜æ–¹çš„ReståŒ…](https://houbb.github.io/2020/05/26/workflow-engine-16-opensource-flowable-ui-intro)

[å·¥ä½œæµå¼•æ“-17-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ flowable workflow designer based on vue and bpmn.io](https://houbb.github.io/2020/05/26/workflow-engine-17-opensource-workflow-bpmn-modeler-intro)

[å·¥ä½œæµå¼•æ“-18-å¼€æºå®¡æ‰¹æµé¡¹ç›®ä¹‹ plumdo-work å·¥ä½œæµï¼Œè¡¨å•ï¼ŒæŠ¥è¡¨ç»“åˆçš„å¤šæ¨¡å—ç³»ç»Ÿ](https://houbb.github.io/2020/05/26/workflow-engine-18-opensource-plumdo-work-intro)

# workflow-bpmn-modeler

ğŸ”¥ æœ¬é¡¹ç›®åŸºäº `vue` å’Œ `bpmn.io@7.0` ï¼Œå®ç° flowable çš„å·¥ä½œæµè®¾è®¡å™¨

## é¢„è§ˆ ğŸ“Ÿ

![20200930030243](https://cdn.jsdelivr.net/gh/nayacco/cdn@master/blog/20200930030243.png)

## åœ¨çº¿ demo ğŸ“¢

ğŸ‘‰ https://nayacco.github.io/workflow-bpmn-modeler/demo/

## å®‰è£… â³

```bash
# å®‰è£…
yarn add workflow-bpmn-modeler
```

## ä½¿ç”¨è¯´æ˜ ğŸ‘£

```vue
<template>
  <div>
    <bpmn-modeler
      ref="refNode"
      :xml="xml"
      :users="users"
      :groups="groups"
      :categorys="categorys"
      :is-view="false"
      @save="save"
    />
  </div>
</template>

<script>
import bpmnModeler from "workflow-bpmn-modeler";

export default {
  components: {
    bpmnModeler,
  },
  data() {
    return {
      xml: "", // åç«¯æŸ¥è¯¢åˆ°çš„xml
      users: [
        { name: "æŠ«å¤´å£«", id: "1" },
        { name: "æ»šçŸ³ä¹é˜Ÿ", id: "2" },
        { name: "å¹³å…‹Â·ä½›æ´›ä¼Šå¾·", id: "3" },
      ],
      groups: [
        { name: "web", id: "4" },
        { name: "java", id: "5" },
        { name: "python", id: "6" },
      ],
      categorys: [
        { name: "éŸ³ä¹", id: "7" },
        { name: "æ–‡ç« ", id: "8" },
      ],
    };
  },
  methods: {
    getModelDetail() {
      // å‘é€è¯·æ±‚ï¼Œè·å–xml
      // this.xml = response.xml
    },
    save(data) {
      console.log(data);  // { process: {...}, xml: '...', svg: '...' }
    },
  },
};
</script>
```

## iframe éƒ¨ç½² ğŸª

å¦‚æœä½ çš„é¡¹ç›®æ˜¯ jquery æˆ– react ç±»é¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡ iframe çš„æ–¹å¼é›†æˆè¯¥æµç¨‹è®¾è®¡å™¨

æœ¬ä»“åº“é€šè¿‡ github pages éƒ¨ç½²äº†é™æ€é¡µé¢ï¼Œä½¿ç”¨ jsdelivr åš cdn ï¼Œå›½å†…è®¿é—®ä¹Ÿéå¸¸å¿«é€Ÿï¼Œæ‰€ä»¥ä½ å¯ä»¥ç›´æ¥é›†æˆæœ¬ä»“åº“çš„é¡µé¢ï¼Œå› ä¸ºå…¨éƒ¨ç™½å«–äº† github çš„èµ„æºï¼Œæ²¡æœ‰è‡ªå·±å»ºæœåŠ¡å™¨ç»´æŠ¤ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒèµ„æºå¤±æ•ˆé—®é¢˜ã€‚

å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ `docs/lib` æ–‡ä»¶å¤¹ä¸‹ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼Œè¿›è¡Œæœ¬åœ°éƒ¨ç½²ã€‚

é›†æˆæ–¹å¼å¦‚ä¸‹ï¼ˆpsï¼šå¯ç›´æ¥æ‹·è´ä»¥ä¸‹ä»£ç åˆ°ä¸€ä¸ªhtmlæ–‡ä»¶ä¸­è¯•ä¸€ä¸‹ï¼‰ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <body>
    <iframe
      src="https://nayacco.github.io/workflow-bpmn-modeler/cdn/0.2.8/"
      id="myFrame"
      frameborder="0"
      width="100%"
      height="800px">
    </iframe>

    <script>
      let myFrame = document.getElementById("myFrame");
      // è·å–åˆ°æµç¨‹è¯¦æƒ…
      window.addEventListener("message", (event) => {
        console.log(event.data); // { xml: 'xxx', img: 'xxx', process: {} }
      });
      myFrame.onload = () => {
        let postMsg = {
          xml: "", // åç«¯æŸ¥è¯¢åˆ°çš„xmlï¼Œæ–°å»ºåˆ™ä¸ºç©ºä¸²
          users: [
            { name: "å¼ ä¸‰1", id: "zhangsan" },
            { name: "æå››1", id: "lisi" },
            { name: "ç‹äº”1", id: "wangwu" },
          ],
          groups: [
            { name: "webç»„1", id: "web" },
            { name: "javaç»„1", id: "java" },
            { name: "pythonç»„1", id: "python" },
          ],
          categorys: [
            { name: "OA1", id: "oa" },
            { name: "è´¢åŠ¡1", id: "finance" },
          ],
          isView: false
        }
        // è®¾ç½®åˆå§‹åŒ–å€¼
        myFrame.contentWindow.postMessage(postMsg, "*")
      }
    </script>
  </body>
</html>
```

## å…³äºå®šåˆ¶ ğŸ› 

æœ¬ç»„ä»¶å¯¹æ ‡çš„æ˜¯ flowable å®˜æ–¹è®¾è®¡å™¨ï¼Œä¹Ÿå°±æ˜¯å®ç° flowable çš„ xml è§„åˆ™æ ‡å‡†ï¼Œé‡Œé¢æ‰€ç”¨åè¯ä¹Ÿéƒ½æ˜¯å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸“ä¸šæœ¯è¯­ã€‚

æ‰€ä»¥è¿™ä¸ªç»„ä»¶åªæ˜¯ç¨‹åºå‘˜åœ¨å¼€å‘é˜¶æ®µï¼Œè‡ªå·±å»ºæ¨¡å¯¼å‡º xml çš„å·¥å…·ï¼Œè¯•å›¾å®šåˆ¶è¯¥å»ºæ¨¡å™¨çš„è¡Œä¸ºéƒ½æ˜¯ä¸å¯¹çš„ï¼Œä¸è¦æŠŠä¸šåŠ¡å¸¦åˆ°å»ºæ¨¡å™¨ä¸­æ¥ï¼

è‡ªå·±çš„ä¸šåŠ¡åº”è¯¥å¦è¡Œå¼€å‘å¢åˆ æ”¹æŸ¥æ¥å®ç°ã€‚

è¯¥ç»„ä»¶æœªæ¥ä¹Ÿä¸ä¼šå‡çº§ UI åº“å’Œ vueã€‚ä¸ç®¡åº“æ˜¯å¦å…¼å®¹ï¼Œé€šè¿‡ iframe çš„æ–¹å¼é›†æˆå»ºæ¨¡å™¨æ‰æ˜¯æœ€ç®€å•æ­£ç¡®çš„æ–¹å¼ã€‚


## License ğŸ“„

[MIT](http://opensource.org/licenses/MIT)

Copyright (c) 2020-present, charles

# å‚è€ƒèµ„æ–™

https://github.com/Nayacco/workflow-bpmn-modeler

* any list
{:toc}