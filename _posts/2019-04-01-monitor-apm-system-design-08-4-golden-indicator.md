---
layout: post
title: 监控报警系统-08-监控系统应该关注哪些指标？四大黄金指标 延迟（Latency）、流量（Traffic）、错误（Errors）、饱和度（Saturation） Four Golden Signals
date:  2021-06-20 16:52:15 +0800
categories: [APM]
tags: [apm, system-design]
published: true
---

# chat

## 哪些监控指标最重要？

根据多份资料的综合分析，业界监控系统的黄金4象限（即四大黄金指标）包括以下四个核心维度： **延迟（Latency）、流量（Traffic）、错误（Errors）、饱和度（Saturation）**。

以下是对这四个指标的详细解读：

---

### **1. 延迟（Latency）**
**定义**：衡量请求从发出到获得响应所需的时间，需区分成功请求与失败请求的延迟。例如，HTTP请求的平均响应时间或数据库查询耗时。  
**关键点**：
- **分位数分析**：需关注不同百分位数（如P50、P90、P99）的延迟分布，而非仅平均值。例如，P99的高延迟可能反映极端异常场景。
- **失败请求的特殊性**：失败请求（如HTTP 500错误）可能以极低延迟返回，需单独监控以避免干扰成功请求的延迟分析。
- **根源定位**：延迟来源包括网络传输、后端处理、数据库查询等，需结合链路追踪工具（如Jaeger）进一步诊断。

---

### **2. 流量（Traffic）**
**定义**：表示系统在单位时间内处理的请求数量或数据量，常用指标包括QPS（每秒查询数）、TPS（每秒事务数）或网络带宽使用率。  
**关键点**：
- **容量规划**：通过流量趋势识别高峰与低谷，例如电商系统在促销期间的流量激增。
- **流量模式分析**：突发流量（如秒杀场景）与平稳流量的应对策略不同，需结合自动扩缩容机制（如Kubernetes HPA）。
- **通信场景扩展**：在微服务架构中，还需监控服务间调用量（如RPC请求数）。

---

### **3. 错误（Errors）**
**定义**：请求未能成功处理的比例或次数，包括显性错误（如HTTP 500）和隐性错误（如返回错误内容或超时）。  
**关键点**：
- **分类细化**：需区分业务逻辑错误、基础设施错误（如磁盘故障）和策略性错误（如强制超时标记为错误）。
- **错误根因分析**：通过错误日志聚合（如ELK Stack）和告警关联（如Prometheus Alertmanager）快速定位问题。
- **用户体验影响**：隐性错误（如搜索结果不准确）可能不触发系统告警，但需通过业务指标（如转化率）间接监控。

---

### **4. 饱和度（Saturation）**
**定义**：系统资源的使用程度，反映“剩余可用容量”，例如CPU利用率、内存占用、磁盘I/O或队列长度。  
**关键点**：
- **资源瓶颈识别**：高饱和度可能导致性能下降甚至服务中断。例如，CPU使用率持续超过80%可能引发排队延迟。
- **间接指标扩展**：除了硬件资源，还需监控软件资源（如数据库连接池使用率、线程池队列长度）。
- **趋势预测**：通过历史数据预测资源耗尽时间（如磁盘空间按当前写入速率预计3天后占满），支持主动运维。

---

### **四大指标的关联性与实践建议**
1. **综合分析**：  
   - 高流量可能导致延迟上升或错误率增加，而资源饱和可能进一步放大这些问题。
   - 示例：某API接口的QPS激增导致数据库连接池耗尽（饱和度），进而引发超时错误（Errors）和延迟飙升（Latency）。

2. **工具与实践**：  
   - **Prometheus**：支持四类指标的采集与聚合，尤其擅长饱和度监控（如`node_memory_MemAvailable_bytes`）。
   - **Grafana**：通过仪表盘可视化延迟分布（如热图）和饱和度趋势（如堆叠面积图）。
   - **SLO（服务等级目标）** ：基于四大指标定义可量化的稳定性目标（如“99%请求延迟≤200ms”）。

3. **扩展方法论**：  
   - **RED方法**：聚焦请求速率（Rate）、错误（Errors）、延迟（Delay），适用于微服务监控。
   - **USE方法**：专注资源使用率（Utilization）、饱和度（Saturation）、错误（Errors），更适合基础设施监控。

---

### **总结**
用户问题中缺失的第四个黄金指标是 **饱和度（Saturation）** ，它通过量化资源使用率帮助预判系统瓶颈，是确保服务稳定性的关键维度。

四大指标需协同使用，结合工具链与监控策略，才能全面覆盖从用户体验到基础设施的运维需求。





# 参考资料

https://forum.huawei.com/enterprise/zh/thread/580933924354408448



* any list
{:toc}