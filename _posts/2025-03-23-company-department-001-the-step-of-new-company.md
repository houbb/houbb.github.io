---
layout: post
title: 新的技术公司，应该如何实现技术积累？
date: 2025-03-17 21:01:55 +0800
categories: [Think]
tags: [think, software, company, department, sh]
published: true
---





# chat

## 技术发展的路径

Q: 如果你是一家创业公司的技术总架构，现在公司的软件应用是空的。你会开始如何逐步推进软件应用服务。比如公司是贷款相关业务，给出理由

作为创业公司的技术总架构师，若需从零开始构建贷款业务软件系统，我会采用 **“合规先行、模块化迭代、风控驱动”** 的策略，分以下阶段推进：

---

### **一、架构设计阶段（0-4周）**
#### **1. 核心业务流解构**
- **关键流程**：  
  用户注册 → 贷款申请 → 信用评估 → 审批决策 → 合同签约 → 放款 → 还款管理 → 催收  
- **技术映射**：  
  ```mermaid
  graph LR  
  A[前端] --> B[API网关] --> C[风控引擎]  
  C --> D[审批系统] --> E[合同管理] --> F[支付通道]  
  G[征信接口] --> C  
  H[用户数据] --> C  
  ```

#### **2. 合规性框架搭建（优先级最高）**
- **必选动作**：  
  - 部署 **KYC（Know Your Customer）** 模块：身份证OCR+活体检测（如阿里云金融级方案）  
  - 集成央行征信/百行征信接口（需提前申请金融资质）  
  - 数据加密标准：至少符合《个人金融信息保护技术规范》JR/T 0171-2020  
  - 审计日志留存6年以上  

#### **3. 技术选型原则**
| 模块 | 技术方案 | 理由 |  
|---|---|---|  
| **后端架构** | 微服务+容器化（Spring Cloud + Kubernetes） | 快速迭代与合规隔离 |  
| **数据库** | PostgreSQL（主库）+ Redis（缓存） | ACID事务+金融级稳定性 |  
| **风控引擎** | Drools规则引擎 + Flink实时计算 | 灵活规则配置+毫秒级响应 |  
| **合同管理** | 法大大/上上签电子签约SDK | 法律效力+司法存证 |  

---

### **二、MVP开发阶段（4-12周）**
#### **1. 核心模块开发优先级**
1. **用户管理系统**  
   - 功能要点：  
     - 四要素认证（姓名、身份证、银行卡、手机号）  
     - 分级权限控制（借款人/风控员/催收员）  
   - 技术实现：  
     - 使用JWT实现无状态Token验证  
     - 敏感信息加密存储（AES-256 + 国密SM4双算法）  

2. **风控决策引擎**  
   - 初版规则集：  
     ```python
     if 央行征信评分 < 600:  
         自动拒绝  
     elif 多头借贷数 > 3:  
         转人工审核  
     else:  
         通过并计算利率（基准利率 + 风险溢价*0.5）  
     ```
   - 数据管道：  
     Kafka实时采集用户行为数据 → Flink风险特征计算 → 规则引擎决策  

3. **极简贷款流程**  
   - 交互设计：  
     ```mermaid
     journey  
       title 贷款申请流程  
       section 用户端  
         填写基本信息: 5  
         上传证件照: 3  
         电子签名: 2  
       section 系统端  
         自动审批: 1  
         合同生成: 1  
     ```

---

### **三、合规验证阶段（12-16周）**
#### **1. 监管沙盒测试**
- **重点检测项**：  
  - 年化利率计算是否符合IRR标准（36%法律红线）  
  - 催收机器人话术是否违反《互联网金融逾期债务催收自律公约》  
  - 数据跨境传输合规性（若涉及海外用户）  

#### **2. 三方安全审计**
- **必选项目**：  
  - 渗透测试（OWASP Top 10漏洞扫描）  
  - 压力测试（支持每秒500+贷款申请并发）  
  - 容灾演练（数据库主从切换时间<30秒）  

---

### **四、迭代优化阶段（16周后）**
#### **1. 智能风控升级**
- 引入机器学习模型：  
  - 特征工程：提取500+维用户特征（通讯录关系网、设备指纹等）  
  - 模型选择：XGBoost逾期预测（AUC需>0.85）  
  - 冷启动方案：先用专家规则跑通3个月数据再启动模型训练  

#### **2. 生态扩展**
- **开放平台建设**：  
  - 提供API给合作商户（如电商平台的分期付款接口）  
  - 资金端对接银行/信托（符合141号文要求的助贷模式）  

---

### **关键实施原则**
1. **合规先行**：金融业务中，一次重大合规事故可能直接导致公司死亡  
2. **数据闭环**：从第一天就建立完整的数据埋点体系（用户行为+风控决策+资金流向）  
3. **灰度发布**：新功能先在10%用户流量中验证稳定性  
4. **灾备设计**：同城双活+异地冷备，RPO<=5分钟  

---

### **成本控制技巧**
- **基础设施**：初期使用阿里云金融云，避免自建机房  
- **人才策略**：核心风控算法岗全职，非关键模块用外包  
- **牌照共享**：与持牌金融机构合作，降低前期资质获取成本  

通过这种架构路径，可在确保合规的前提下，用最低成本验证商业模式，同时为后续规模化留出足够扩展性。金融科技领域，**“快“必须在”稳“的基础上实现**。

## MVP 阶段，你认为应该搭建哪些应用服务来满足业务需求？为什么？

在贷款业务的MVP（最小可行产品）阶段，应聚焦于 **“验证核心业务流程+满足监管底线”**，优先搭建以下关键应用服务，并严格控制开发范围：

---

### **1. 用户管理系统（User Identity Service）**
**为什么必须？**  
- **合规基础**：金融业务必须完成用户实名认证（四要素验证：姓名、身份证、银行卡、手机号），否则无法开展业务。  
- **最小功能集**：  
  - 注册/登录（短信验证码+密码）  
  - 身份证OCR识别（集成阿里云/腾讯云金融级方案）  
  - 活体检测（防止黑产攻击）  
  - 分级权限控制（借款人/风控员/管理员角色）  
**技术实现**：  
  - 使用JWT实现无状态Token验证  
  - 敏感信息加密存储（AES-256 + 国密SM4双算法）  

---

### **2. 风控决策引擎（Risk Engine）**
**为什么必须？**  
- **业务存活核心**：贷款业务的生死取决于风控能力，坏账率超过5%即可导致破产。  
- **MVP阶段方案**：  
  - **规则引擎**：基于Drools/FastAPI搭建可配置规则  
    ```python
    # 初版规则示例
    if 央行征信分 < 600: 
        reject()  
    elif 近3月贷款申请次数 > 5: 
        manual_review()  
    else: 
        approve(rate=基准利率 + 风险分*0.3)
    ```
  - **数据源**：  
    - 央行征信接口（必接）  
    - 运营商数据（通话记录稳定性分析）  
    - 银行卡流水（验证收入真实性）  
**技术实现**：  
  - 实时风控：Kafka + Flink处理用户行为流数据  
  - 决策日志全留存（满足监管审计要求）  

---

### **3. 极简贷款流程（Loan Flow）**
**为什么必须？**  
- **用户转化关键**：贷款申请流程每多一步，流失率增加15%-30%。  
- **MVP交互设计**：  
  ```mermaid
  journey
    title 用户端贷款流程
    section 申请
      填写贷款金额/期限: 5
      身份证拍照上传: 3
      电子签名: 2
    section 系统端
      自动审批: 1
      合同生成: 1
      放款至银行卡: 1
  ```
**技术实现**：  
  - 前端：React单页应用（支持移动端H5）  
  - 后端：Spring Boot微服务（审批流引擎）  

---

### **4. 支付与放款系统（Payment Gateway）**
**为什么必须？**  
- **资金流不可中断**：放款失败直接导致用户投诉和监管关注。  
- **MVP方案**：  
  - 对接银行存管系统（如平安银行存管API）  
  - 还款通道：支持银行卡代扣（必须支持实时扣款状态查询）  
  - 对账模块：每日自动核对交易流水（差额>0.1元触发警报）  
**技术实现**：  
  - 使用分布式事务（Seata）保障资金操作一致性  
  - 敏感操作二次验证（短信Token+人脸识别）  

---

### **5. 合同管理系统（Contract Service）**
**为什么必须？**  
- **法律效力**：电子合同缺失将导致债务无法追偿。  
- **MVP功能**：  
  - 合同模板动态生成（根据贷款金额/利率自动填充）  
  - 电子签约（集成法大大/上上签SDK）  
  - 合同存证（区块链存证+本地备份）  
**技术实现**：  
  - PDF模板引擎（Apache FOP）  
  - 合同验签（SHA256+时间戳）  

---

### **6. 数据埋点与分析（Data Pipeline）**
**为什么必须？**  
- **迭代依据**：无数据支撑无法优化风控模型和用户体验。  
- **MVP方案**：  
  - 关键埋点：  
    - 用户申请放弃节点（如证件上传失败次数）  
    - 风控规则触发情况（各规则拒绝占比）  
    - 放款到账时长（95%需<10分钟）  
  - 分析工具：  
    - 实时看板（Metabase + Elasticsearch）  
    - 基础漏斗分析（从申请到放款转化率）  

---

### **7. 运维监控系统（DevOps）**
**为什么必须？**  
- **金融级稳定性**：系统宕机1小时可能导致监管处罚和用户流失。  
- **MVP监控项**：  
  - 应用层：API成功率（SLA>99.9%）、响应时间（P99<800ms）  
  - 数据库：慢查询（>1s的SQL告警）、连接池使用率  
  - 安全：异常登录尝试（同IP>5次/分钟告警）  
**技术实现**：  
  - 监控栈：Prometheus + Grafana  
  - 日志：ELK（Elasticsearch+Logstash+Kibana）  

---

### **8. 合规管理模块（Compliance）**
**为什么必须？**  
- **监管红线**：利率计算错误或催收违规可能直接导致业务关停。  
- **MVP强制功能**：  
  - 年化利率（APR/IRR）自动计算与展示  
  - 合同关键条款高亮提示（如逾期罚息规则）  
  - 催收操作记录全审计（禁止夜间22:00-8:00外呼）  
**技术实现**：  
  - 利率计算库：FinMath等金融计算组件  
  - 时间窗口控制：Quartz调度器+时区管理  

---

### **可延后功能（非MVP必需）**
1. **复杂风控模型**：初期用规则引擎代替AI模型  
2. **全自动催收系统**：MVP阶段人工电话+短信模板即可  
3. **多语言支持**：优先服务单一区域市场  
4. **客户自助门户**：账单查询等功能可用邮件+短信替代  

---

### **MVP阶段技术选型原则**
| 类别 | 选型 | 理由 |
|---|---|---|
| **架构** | 微服务（Spring Cloud） | 快速迭代且符合金融系统隔离要求 |  
| **数据库** | PostgreSQL | 支持JSONB字段存储风控规则 |  
| **缓存** | Redis Cluster | 高并发场景下风控查询加速 |  
| **部署** | Docker + K8s | 快速回滚和灰度发布能力 |  

---

### **为什么必须这8个服务？**
1. **用户验证**：KYC（了解你的客户）是金融业务法律底线  
2. **风控存活**：坏账控制决定公司生死  
3. **资金闭环**：放款/还款通道缺失则无法形成业务闭环  
4. **法律屏障**：电子合同和利率合规是纠纷处理依据  
5. **数据驱动**：无埋点数据则后续迭代如同盲人摸象  
6. **稳定保障**：金融系统需满足99.9%可用性  

通过这8个服务的组合，可在3-4个月内以200-300万人民币成本（含人力+云资源）上线合规可用的贷款MVP，同时满足：  
- 单日处理5000+贷款申请  
- 从申请到放款平均8分钟完成  
- 基础风控规则拦截80%高风险用户

## TODO

如何进行公司的资质等方面？

如何进行前期的用户拓展+资金周转？

# 参考资料

https://github.com/jobbole/awesome-java-cn

* any list
{:toc}