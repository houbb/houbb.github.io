# dubbo

DUBBO是一个分布式服务框架，致力于提供高性能和透明化的RPC远程服务调用方案，是阿里巴巴SOA服务化治理方案的核心框架，
每天为2,000+个服务提供3,000,000,000+次访问量支持，并被广泛应用于阿里巴巴集团的各成员站点。


dubbo是用来跨系统通信的，即使不用集群也可以。一个系统用作客户端，一个系统则充当服务端。服务端要把自己的接口定义提供给客户端，
客户端将接口定义在spring中的bean。客户端可以直接使用这个bean，就好像这些接口的实现也是在自己代码里一样。
客户端和服务端启动的时候都会把自己的机器IP注册到zookeeper上。
客户端会把zk上的服务端ip拉到磁盘上，并记录哪些ip提供哪些服务（服务端启动的时候暴露给zk）。
然后调用的时候客户端会根据ip调用服务端的服务，这时候即使zk挂掉也没关系。

作者：断臂残猿
链接：https://www.zhihu.com/question/30971953/answer/141788348
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

## 概念

> soa?


[zhihu SOA](https://www.zhihu.com/question/37808426)

> rpc?

1) 远程过程调用协议

2) RPC采用客户机/服务器模式。请求程序就是一个客户机，而服务提供程序就是一个服务器。

RPC（Remote Procedure Call Protocol）——远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。
RPC协议假定某些传输协议的存在，如TCP或UDP，为通信程序之间携带信息数据。在OSI网络通信模型中，RPC跨越了传输层和应用层。
RPC使得开发包括网络分布式多程序在内的应用程序更加容易。

RPC采用客户机/服务器模式。请求程序就是一个客户机，而服务提供程序就是一个服务器。
首先，客户机调用进程发送一个有进程参数的调用信息到服务进程，然后等待应答信息。在服务器端，进程保持睡眠状态直到调用信息到达为止。
当一个调用信息到达，服务器获得进程参数，计算结果，发送答复信息，然后等待下一个调用信息，最后，客户端调用进程接收答复信息，获得进程结果，
然后调用执行继续进行。
有多种 RPC模式和执行。最初由 Sun 公司提出。IETF ONC 宪章重新修订了 Sun 版本，使得 ONC RPC 协议成为 IETF 标准协议。
现在使用最普遍的模式和执行是开放式软件基础的分布式计算环境（DCE）。




## 使用

> 注意点

1) dubbo的接口参数要求**序列化**，所以在设计接口的时候参数尽量自定义。
2) dubbo的异常捕获问题，内部实现了拦截器捕获异常，不过里面存在一个bug，说把异常类和接口类放在一个包中可以抛出看了代码获取到路径是包括类名的所以不可能，
如果想跑出自定义的异常可以覆盖那个拦截器。
3) dubbo项目提供jar的方式，这要求在开发过程中，尽量把需要提供给外部的接口以及输入输出参数规范到几个包中，打成jar提供给外部，不需要整个项目打包。



## 横向对比。扩展、心得。

> 优缺点

优点： 
1.远程通讯: 提供对多种基于长连接的NIO框架抽象封装， 
包括多种线程模型，序列化，以及“请求-响应”模式的信息交换方式。 

2.软负载均衡及容错机制: 提供基于接口方法的透明远程过程调用，包括多协议支持，以及软负载均衡，失败容错，地址路由，动态配置等集群支持。 
可在内网替代F5等硬件负载均衡器，降低成本，减少单点。 

3.服务自动注册与发现: 基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器 

4.提供完善的管理控制台dubbo-admin与简单的控制中心dubbo-monitor 

5.Dubbo提供了伸缩性很好的插件模型，很方便进行扩展（ExtensionLoader） 

6.支持多协议 

使用方法： 
Dubbo采用全spring配置方式，透明化接入应用，对应用没有任何API侵入， 
只需用Spring加载Dubbo的配置即可，Dubbo基于Spring的Schema扩展进行加载。


缺点:

1) 暂时无人维护。

> Spring-cloud

从项目的背景来看，Dubbo 国内用的公司挺多，国内影响力大，Spring Cloud 自然在国外影响力较大，所以这个来看不分伯仲了，毕竟都有大公司在使用。
从社区的活跃度来看，可以看下各自的Github托管项目来区分，Dubbo · GitHub 与 Spring Cloud · GitHub ，
从更新频率与更新时间来看 Spring Cloud 优于Dubbo，Dubbo基本不维护了。

从框架的完整度来看，Dubbo只是实现了服务治理（注册 发现等），
而Spring Cloud下面有很多个子项目覆盖了微服务架构下的方方面面，服务治理只是其中的一个方面，一定程度来说，
Dubbo只是Spring Cloud Netflix中的一个子集。

如果选择Spring Cloud，基本上每个环节都已经有了对应的组件支持，可能有些也不一定能满足你所有的需求，
但是其活跃的社区与快速的迭代更新也会让你没有后顾之忧。

作者：金可伟
链接：https://www.zhihu.com/question/45413135/answer/127169875
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

